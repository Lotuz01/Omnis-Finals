/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/backup/route";
exports.ids = ["app/api/backup/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbackup%2Froute&page=%2Fapi%2Fbackup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbackup%2Froute.ts&appDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbackup%2Froute&page=%2Fapi%2Fbackup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbackup%2Froute.ts&appDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_Lotuz_Desktop_Nova_pasta_src_app_api_backup_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/backup/route.ts */ \"(rsc)/./src/app/api/backup/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/backup/route\",\n        pathname: \"/api/backup\",\n        filename: \"route\",\n        bundlePath: \"app/api/backup/route\"\n    },\n    distDir: \".next\" || 0,\n    projectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\Lotuz\\\\Desktop\\\\Nova pasta\\\\src\\\\app\\\\api\\\\backup\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Lotuz_Desktop_Nova_pasta_src_app_api_backup_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/backup/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = \"false\";\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                dynamicIO: Boolean(nextConfig.experimental.dynamicIO),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZiYWNrdXAlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmJhY2t1cCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmJhY2t1cCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNMb3R1eiU1Q0Rlc2t0b3AlNUNOb3ZhJTIwcGFzdGElNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0xvdHV6JTVDRGVza3RvcCU1Q05vdmElMjBwYXN0YSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNpQztBQUNuRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCxnQkFBZ0IsTUFBdUM7QUFDdkQ7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxz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YTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBLDRDQUE0Qyw2RkFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcTG90dXpcXFxcRGVza3RvcFxcXFxOb3ZhIHBhc3RhXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGJhY2t1cFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYmFja3VwL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYmFja3VwXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9iYWNrdXAvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXExvdHV6XFxcXERlc2t0b3BcXFxcTm92YSBwYXN0YVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxiYWNrdXBcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9iYWNrdXAvcm91dGVcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlLFxuICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGVcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYnVpbGRJZCwgcGFyYW1zLCBuZXh0Q29uZmlnLCBpc0RyYWZ0TW9kZSwgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQsIGlzT25EZW1hbmRSZXZhbGlkYXRlLCByZXZhbGlkYXRlT25seUdlbmVyYXRlZCwgcmVzb2x2ZWRQYXRobmFtZSB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IGlzSXNyID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgIGlmIChpc0lzciAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICAgICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdO1xuICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8uZmFsbGJhY2sgPT09IGZhbHNlICYmICFpc1ByZXJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKGlzSXNyICYmICFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgICAgICAvLyBlbnN1cmUgL2luZGV4IGFuZCAvIGlzIG5vcm1hbGl6ZWQgdG8gb25lIGtleVxuICAgICAgICBjYWNoZUtleSA9IGNhY2hlS2V5ID09PSAnL2luZGV4JyA/ICcvJyA6IGNhY2hlS2V5O1xuICAgIH1cbiAgICBjb25zdCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSA9IC8vIElmIHdlJ3JlIGluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgc3VwcG9ydCBkeW5hbWljIEhUTUxcbiAgICByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAvLyBJZiB0aGlzIGlzIG5vdCBTU0cgb3IgZG9lcyBub3QgaGF2ZSBzdGF0aWMgcGF0aHMsIHRoZW4gaXQgc3VwcG9ydHNcbiAgICAvLyBkeW5hbWljIEhUTUwuXG4gICAgIWlzSXNyO1xuICAgIC8vIFRoaXMgaXMgYSByZXZhbGlkYXRpb24gcmVxdWVzdCBpZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWNcbiAgICAvLyBwYWdlIGFuZCBpdCBpcyBub3QgYmVpbmcgcmVzdW1lZCBmcm9tIGEgcG9zdHBvbmVkIHJlbmRlciBhbmRcbiAgICAvLyBpdCBpcyBub3QgYSBkeW5hbWljIFJTQyByZXF1ZXN0IHRoZW4gaXQgaXMgYSByZXZhbGlkYXRpb25cbiAgICAvLyByZXF1ZXN0LlxuICAgIGNvbnN0IGlzUmV2YWxpZGF0ZSA9IGlzSXNyICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTtcbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAgICAgZHluYW1pY0lPOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmR5bmFtaWNJTyksXG4gICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UsXG4gICAgICAgICAgICBpbmNyZW1lbnRhbENhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbmNyZW1lbnRhbENhY2hlJyksXG4gICAgICAgICAgICBjYWNoZUxpZmVQcm9maWxlczogKF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbCA9IG5leHRDb25maWcuZXhwZXJpbWVudGFsKSA9PSBudWxsID8gdm9pZCAwIDogX25leHRDb25maWdfZXhwZXJpbWVudGFsLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gYXN5bmMgKGN1cnJlbnRTcGFuKT0+e1xuICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VHZW5lcmF0b3IgPSBhc3luYyAoeyBwcmV2aW91c0NhY2hlRW50cnkgfSk9PntcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbi1kZW1hbmQgcmV2YWxpZGF0ZSBhbHdheXMgc2V0cyB0aGlzIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCAnUkVWQUxJREFURUQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoY3VycmVudFNwYW4pO1xuICAgICAgICAgICAgICAgICAgICByZXEuZmV0Y2hNZXRyaWNzID0gY29udGV4dC5yZW5kZXJPcHRzLmZldGNoTWV0cmljcztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlbmRpbmdXYWl0VW50aWwgPSBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB1c2luZyBwcm92aWRlZCB3YWl0VW50aWwgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHdlIGZhbGxiYWNrIHRvIHNlbmRSZXNwb25zZSdzIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nV2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LndhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC53YWl0VW50aWwocGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dhaXRVbnRpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVRhZ3MgPSBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkVGFncztcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljIHJlc3BvbnNlLCB3ZSBjYW4gY2FjaGUgaXQgc28gbG9uZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhcyBpdCdzIG5vdCBlZGdlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJc3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBoZWFkZXJzIGZyb20gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXSA9IGNhY2hlVGFncztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVyc1snY29udGVudC10eXBlJ10gJiYgYmxvYi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10gPSBibG9iLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZhbGlkYXRlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA+PSBJTkZJTklURV9DQUNIRSA/IGZhbHNlIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBpcmUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA+PSBJTkZJTklURV9DQUNIRSA/IHVuZGVmaW5lZCA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNhY2hlIGVudHJ5IGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBCdWZmZXIuZnJvbShhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCByZXNwb25zZSB3aXRob3V0IGNhY2hpbmcgaWYgbm90IElTUlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgcmVzcG9uc2UsIGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBiYWNrZ3JvdW5kIHJldmFsaWRhdGUgd2UgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgZXJyb3IgaGVyZSBhcyBpdCB3b24ndCBiZSBidWJibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzQ2FjaGVFbnRyeS5pc1N0YWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJvdXRlclNlcnZlckNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBjYWNoZUtleSxcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgaXNGYWxsYmFjazogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBjcmVhdGUgYSBjYWNoZUVudHJ5IGZvciBJU1JcbiAgICAgICAgICAgIGlmICghaXNJc3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGFwcC1yb3V0ZSByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7Y2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU3MDFcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEcmFmdCBtb2RlIHNob3VsZCBuZXZlciBiZSBjYWNoZWRcbiAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhjYWNoZUVudHJ5LnZhbHVlLmhlYWRlcnMpO1xuICAgICAgICAgICAgaWYgKCEoZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc0lzcikpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShORVhUX0NBQ0hFX1RBR1NfSEVBREVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNhY2hlIGNvbnRyb2wgaXMgYWxyZWFkeSBzZXQgb24gdGhlIHJlc3BvbnNlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgJiYgIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSAmJiAhaGVhZGVycy5nZXQoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgZ2V0Q2FjaGVDb250cm9sSGVhZGVyKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UoY2FjaGVFbnRyeS52YWx1ZS5ib2R5LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNhY2hlRW50cnkudmFsdWUuc3RhdHVzIHx8IDIwMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVSZXNwb25zZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVSZXNwb25zZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGlmIHdlIGFyZW4ndCB3cmFwcGVkIGJ5IGJhc2Utc2VydmVyIGhhbmRsZSBoZXJlXG4gICAgICAgIGlmICghYWN0aXZlU3BhbiAmJiAhKGVyciBpbnN0YW5jZW9mIE5vRmFsbGJhY2tFcnJvcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogbm9ybWFsaXplZFNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldGhyb3cgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIHNlcnZpbmcgZXJyb3IgcGFnZVxuICAgICAgICAvLyBJZiB0aGlzIGlzIGR1cmluZyBzdGF0aWMgZ2VuZXJhdGlvbiwgdGhyb3cgdGhlIGVycm9yIGFnYWluLlxuICAgICAgICBpZiAoaXNJc3IpIHRocm93IGVycjtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBzZW5kIGEgNTAwIHJlc3BvbnNlLlxuICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbackup%2Froute&page=%2Fapi%2Fbackup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbackup%2Froute.ts&appDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/backup/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/backup/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _utils_database_pool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/database-pool */ \"(rsc)/./src/utils/database-pool.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/logger */ \"(rsc)/./src/utils/logger.ts\");\n\n\n\n\n\n\n// Verificar se o usurio  administrador\nasync function verifyAdmin(authToken) {\n    if (!authToken) {\n        return false;\n    }\n    // Extrair username do token (remover timestamp se presente)\n    const username = authToken.includes('_') ? authToken.split('_')[0] : authToken;\n    try {\n        const [users] = await _utils_database_pool__WEBPACK_IMPORTED_MODULE_4__.dbPool.execute('SELECT username, is_admin FROM users WHERE username = ?', [\n            username\n        ]);\n        if (users.length === 0) {\n            return false;\n        }\n        const user = users[0];\n        // Compatvel com colunas BOOLEAN (true/false) e TINYINT(1) (0/1)\n        return Boolean(user.is_admin);\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.error('Erro ao verificar admin', error);\n        return false;\n    }\n}\n// GET - Listar backups disponveis\nasync function GET() {\n    const startTime = Date.now();\n    try {\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n        const authToken = cookieStore.get('auth_token')?.value;\n        if (!authToken) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Tentativa de acesso no autorizado');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        const isAdmin = await verifyAdmin(authToken);\n        if (!isAdmin) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Acesso negado - usurio no  admin', {\n                endpoint: '/api/backup'\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Admin access required'\n            }, {\n                status: 403\n            });\n        }\n        const backupDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'src', 'backups');\n        try {\n            const files = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readdir(backupDir);\n            const backupFiles = files.filter((file)=>file.startsWith('backup_') && file.endsWith('.json'));\n            const backups = [];\n            // Processar arquivos em paralelo para melhor performance\n            const filePromises = backupFiles.map(async (file)=>{\n                try {\n                    const filePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(backupDir, file);\n                    const stats = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(filePath);\n                    const sizeKB = (stats.size / 1024).toFixed(2);\n                    return {\n                        filename: file,\n                        size: `${sizeKB} KB`,\n                        sizeFormatted: formatBytes(stats.size),\n                        created: stats.mtime.toISOString(),\n                        path: filePath\n                    };\n                } catch (error) {\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.warn('Erro ao processar arquivo de backup', error);\n                    return null;\n                }\n            });\n            const results = await Promise.all(filePromises);\n            backups.push(...results.filter((backup)=>backup !== null));\n            // Ordenar por data de criao (mais recente primeiro)\n            backups.sort((a, b)=>new Date(b.created).getTime() - new Date(a.created).getTime());\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Backup list retrieved', {\n                count: backups.length,\n                duration: Date.now() - startTime\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                backups\n            });\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                backups: []\n            });\n        }\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.error('Error listing backups', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'Error listing backups',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// Funo auxiliar para formatar bytes\nfunction formatBytes(bytes) {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = [\n        'Bytes',\n        'KB',\n        'MB',\n        'GB'\n    ];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n// POST - Criar novo backup\nasync function POST(request) {\n    const startTime = Date.now();\n    try {\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n        const authToken = cookieStore.get('auth_token')?.value;\n        if (!authToken) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Tentativa de criao de backup no autorizada', {\n                endpoint: '/api/backup'\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        const isAdmin = await verifyAdmin(authToken);\n        if (!isAdmin) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Tentativa de criao de backup por no-admin', {\n                endpoint: '/api/backup'\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Admin access required'\n            }, {\n                status: 403\n            });\n        }\n        const { action, filename } = await request.json();\n        if (action === 'create') {\n            const backup = {\n                timestamp: new Date().toISOString(),\n                version: '1.0',\n                data: {},\n                metadata: {\n                    totalRecords: 0,\n                    tablesCount: 0\n                }\n            };\n            // Lista de tabelas permitidas para backup com ordem de dependncia\n            const allowedTables = {\n                'users': 'SELECT * FROM users',\n                'products': 'SELECT * FROM products',\n                'movements': 'SELECT * FROM movements',\n                'accounts': 'SELECT * FROM accounts'\n            };\n            const tables = Object.keys(allowedTables);\n            let totalRecords = 0;\n            // Usar transao para garantir consistncia dos dados\n            await (0,_utils_database_pool__WEBPACK_IMPORTED_MODULE_4__.withTransaction)(async (connection)=>{\n                for (const table of tables){\n                    try {\n                        // Usar query pr-definida para evitar SQL injection\n                        const query = allowedTables[table];\n                        const [rows] = await connection.execute(query);\n                        backup.data[table] = rows;\n                        totalRecords += rows.length;\n                        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.debug(`Backup da tabela ${table} concludo`, {\n                            records: rows.length\n                        });\n                    } catch (error) {\n                        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.warn(`Erro ao fazer backup da tabela ${table}`, error);\n                        backup.data[table] = [];\n                    }\n                }\n            });\n            backup.metadata.totalRecords = totalRecords;\n            backup.metadata.tablesCount = Object.keys(backup.data).length;\n            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n            const backupDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'src', 'backups');\n            const backupFile = path__WEBPACK_IMPORTED_MODULE_2___default().join(backupDir, `backup_${timestamp}.json`);\n            // Criar diretrio se no existir\n            try {\n                await fs__WEBPACK_IMPORTED_MODULE_1__.promises.mkdir(backupDir, {\n                    recursive: true\n                });\n                _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Diretrio de backup criado', {\n                    path: backupDir\n                });\n            } catch  {\n            // Diretrio j existe\n            }\n            // Escrever backup de forma assncrona e otimizada\n            const backupData = JSON.stringify(backup, null, 2);\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.writeFile(backupFile, backupData, {\n                encoding: 'utf8'\n            });\n            const stats = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(backupFile);\n            const sizeKB = (stats.size / 1024).toFixed(2);\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Backup created successfully', {\n                action: 'create',\n                filename: path__WEBPACK_IMPORTED_MODULE_2___default().basename(backupFile),\n                size: stats.size,\n                totalRecords,\n                tablesCount: backup.metadata.tablesCount,\n                duration: Date.now() - startTime\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Backup created successfully',\n                filename: path__WEBPACK_IMPORTED_MODULE_2___default().basename(backupFile),\n                size: `${sizeKB} KB`,\n                sizeFormatted: formatBytes(stats.size),\n                timestamp: backup.timestamp,\n                totalRecords,\n                tablesCount: backup.metadata.tablesCount,\n                tables: Object.keys(backup.data).map((table)=>({\n                        name: table,\n                        records: Array.isArray(backup.data[table]) ? backup.data[table].length : 0\n                    }))\n            });\n        } else if (action === 'restore' && filename) {\n            // Restaurar backup\n            const backupDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'src', 'backups');\n            const backupFilePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(backupDir, filename);\n            // Verificar se arquivo existe\n            try {\n                await fs__WEBPACK_IMPORTED_MODULE_1__.promises.access(backupFilePath);\n            } catch  {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: 'Backup file not found'\n                }, {\n                    status: 404\n                });\n            }\n            // Ler e restaurar backup\n            const backupContent = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(backupFilePath, 'utf8');\n            const backup = JSON.parse(backupContent);\n            let restoredRecords = 0;\n            await (0,_utils_database_pool__WEBPACK_IMPORTED_MODULE_4__.withTransaction)(async (connection)=>{\n                // Desabilitar verificaes de chave estrangeira\n                await connection.execute('SET FOREIGN_KEY_CHECKS = 0');\n                const restoredTables = [];\n                // Restaurar cada tabela\n                for (const [tableName, tableData] of Object.entries(backup.data)){\n                    // Limpar tabela atual\n                    await connection.execute(`DELETE FROM ${tableName}`);\n                    if (tableData.length > 0) {\n                        // Obter colunas da primeira linha\n                        const columns = Object.keys(tableData[0]);\n                        const placeholders = columns.map(()=>'?').join(', ');\n                        const columnNames = columns.join(', ');\n                        const insertQuery = `INSERT INTO ${tableName} (${columnNames}) VALUES (${placeholders})`;\n                        // Inserir dados\n                        for (const row of tableData){\n                            const values = columns.map((col)=>row[col]);\n                            await connection.execute(insertQuery, values);\n                        }\n                    }\n                    restoredRecords += tableData.length;\n                    restoredTables.push({\n                        name: tableName,\n                        records: tableData.length\n                    });\n                    _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.debug(`Tabela ${tableName} restaurada`, {\n                        records: tableData.length\n                    });\n                }\n                // Reabilitar verificaes de chave estrangeira\n                await connection.execute('SET FOREIGN_KEY_CHECKS = 1');\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('Backup restored successfully', {\n                action: 'restore',\n                filename,\n                restoredRecords,\n                duration: Date.now() - startTime\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Backup restored successfully',\n                backupDate: backup.timestamp,\n                restoredRecords\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Invalid action'\n            }, {\n                status: 400\n            });\n        }\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.error('Error in backup operation', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'Error in backup operation',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE - Deletar backup\nasync function DELETE(request) {\n    try {\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)();\n        const authToken = cookieStore.get('auth_token')?.value;\n        if (!authToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Unauthorized'\n            }, {\n                status: 401\n            });\n        }\n        const isAdmin = await verifyAdmin(authToken);\n        if (!isAdmin) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Admin access required'\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.text();\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.debug('DELETE backup request body received', {\n            body\n        });\n        let filename = '';\n        try {\n            filename = JSON.parse(body).filename;\n        } catch (err) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.error('Error parsing JSON in DELETE backup', err);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Erro ao processar JSON'\n            }, {\n                status: 400\n            });\n        }\n        if (!filename) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Filename is required'\n            }, {\n                status: 400\n            });\n        }\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info('DELETE backup request', {\n            filename\n        });\n        const backupDir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'src', 'backups');\n        const backupFilePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(backupDir, filename);\n        // Verificar se arquivo existe\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.access(backupFilePath);\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Backup file not found'\n            }, {\n                status: 404\n            });\n        }\n        // Deletar arquivo\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.unlink(backupFilePath);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'Backup deleted successfully'\n        });\n    } catch (error) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.error('Error deleting backup', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'Error deleting backup',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDbEIsRUFBRSxPQUFNO1lBQ04sT0FBT2hILHFEQUFZQSxDQUFDNEIsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQXdCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMvRTtRQUVBLGtCQUFrQjtRQUNsQixNQUFNNUIsd0NBQUVBLENBQUNvSSxNQUFNLENBQUN0QjtRQUVoQixPQUFPaEgscURBQVlBLENBQUM0QixJQUFJLENBQUM7WUFBRUMsU0FBUztRQUE4QjtJQUVwRSxFQUFFLE9BQU9WLE9BQU87UUFDZFosaURBQU1BLENBQUNZLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3RDLE9BQU9uQixxREFBWUEsQ0FBQzRCLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQXlCVixPQUFPLE1BQWlCVSxPQUFPO1FBQUMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDaEg7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMb3R1elxcRGVza3RvcFxcTm92YSBwYXN0YVxcc3JjXFxhcHBcXGFwaVxcYmFja3VwXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgZGJQb29sLCB3aXRoVHJhbnNhY3Rpb24gfSBmcm9tICcuLi8uLi8uLi91dGlscy9kYXRhYmFzZS1wb29sJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2xvZ2dlcic7XG5cblxuLy8gVmVyaWZpY2FyIHNlIG8gdXN1w6FyaW8gw6kgYWRtaW5pc3RyYWRvclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QWRtaW4oYXV0aFRva2VuOiBzdHJpbmcpIHtcbiAgaWYgKCFhdXRoVG9rZW4pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBFeHRyYWlyIHVzZXJuYW1lIGRvIHRva2VuIChyZW1vdmVyIHRpbWVzdGFtcCBzZSBwcmVzZW50ZSlcbiAgY29uc3QgdXNlcm5hbWUgPSBhdXRoVG9rZW4uaW5jbHVkZXMoJ18nKSA/IGF1dGhUb2tlbi5zcGxpdCgnXycpWzBdIDogYXV0aFRva2VuO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgW3VzZXJzXSA9IGF3YWl0IGRiUG9vbC5leGVjdXRlPHsgdXNlcm5hbWU6IHN0cmluZzsgaXNfYWRtaW46IG51bWJlciB8IGJvb2xlYW4gfVtdPihcbiAgICAgICdTRUxFQ1QgdXNlcm5hbWUsIGlzX2FkbWluIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JyxcbiAgICAgIFt1c2VybmFtZV1cbiAgICApO1xuICAgIFxuICAgIGlmICh1c2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXNlciA9IHVzZXJzWzBdO1xuICAgIC8vIENvbXBhdMOtdmVsIGNvbSBjb2x1bmFzIEJPT0xFQU4gKHRydWUvZmFsc2UpIGUgVElOWUlOVCgxKSAoMC8xKVxuICAgIHJldHVybiBCb29sZWFuKHVzZXIuaXNfYWRtaW4pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJybyBhbyB2ZXJpZmljYXIgYWRtaW4nLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEdFVCAtIExpc3RhciBiYWNrdXBzIGRpc3BvbsOtdmVpc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29uc3QgYXV0aFRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xuXG4gICAgaWYgKCFhdXRoVG9rZW4pIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdUZW50YXRpdmEgZGUgYWNlc3NvIG7Do28gYXV0b3JpemFkbycpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0FkbWluID0gYXdhaXQgdmVyaWZ5QWRtaW4oYXV0aFRva2VuKTtcbiAgICBpZiAoIWlzQWRtaW4pIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdBY2Vzc28gbmVnYWRvIC0gdXN1w6FyaW8gbsOjbyDDqSBhZG1pbicsIHsgXG4gICAgICAgIGVuZHBvaW50OiAnL2FwaS9iYWNrdXAnXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDMgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmFja3VwRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzcmMnLCAnYmFja3VwcycpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIoYmFja3VwRGlyKTtcbiAgICAgIGNvbnN0IGJhY2t1cEZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5zdGFydHNXaXRoKCdiYWNrdXBfJykgJiYgZmlsZS5lbmRzV2l0aCgnLmpzb24nKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhY2t1cHMgPSBbXTtcbiAgICAgIFxuICAgICAgLy8gUHJvY2Vzc2FyIGFycXVpdm9zIGVtIHBhcmFsZWxvIHBhcmEgbWVsaG9yIHBlcmZvcm1hbmNlXG4gICAgICBjb25zdCBmaWxlUHJvbWlzZXMgPSBiYWNrdXBGaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihiYWNrdXBEaXIsIGZpbGUpO1xuICAgICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZnMuc3RhdChmaWxlUGF0aCk7XG4gICAgICAgICAgY29uc3Qgc2l6ZUtCID0gKHN0YXRzLnNpemUgLyAxMDI0KS50b0ZpeGVkKDIpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlbmFtZTogZmlsZSxcbiAgICAgICAgICAgIHNpemU6IGAke3NpemVLQn0gS0JgLFxuICAgICAgICAgICAgc2l6ZUZvcm1hdHRlZDogZm9ybWF0Qnl0ZXMoc3RhdHMuc2l6ZSksXG4gICAgICAgICAgICBjcmVhdGVkOiBzdGF0cy5tdGltZS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgcGF0aDogZmlsZVBhdGhcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvIGFvIHByb2Nlc3NhciBhcnF1aXZvIGRlIGJhY2t1cCcsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlUHJvbWlzZXMpO1xuICAgICAgYmFja3Vwcy5wdXNoKC4uLnJlc3VsdHMuZmlsdGVyKGJhY2t1cCA9PiBiYWNrdXAgIT09IG51bGwpKTtcbiAgICAgIFxuICAgICAgLy8gT3JkZW5hciBwb3IgZGF0YSBkZSBjcmlhw6fDo28gKG1haXMgcmVjZW50ZSBwcmltZWlybylcbiAgICAgIGJhY2t1cHMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWQpLmdldFRpbWUoKSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKCdCYWNrdXAgbGlzdCByZXRyaWV2ZWQnLCB7IGNvdW50OiBiYWNrdXBzLmxlbmd0aCwgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUgfSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBiYWNrdXBzIH0pO1xuICAgICAgXG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBiYWNrdXBzOiBbXSB9KTtcbiAgICB9XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdFcnJvciBsaXN0aW5nIGJhY2t1cHMnLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGxpc3RpbmcgYmFja3VwcycsIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG4vLyBGdW7Dp8OjbyBhdXhpbGlhciBwYXJhIGZvcm1hdGFyIGJ5dGVzXG5mdW5jdGlvbiBmb3JtYXRCeXRlcyhieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQnl0ZXMnO1xuICBjb25zdCBrID0gMTAyNDtcbiAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJ107XG4gIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcbiAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV07XG59XG5cbi8vIFBPU1QgLSBDcmlhciBub3ZvIGJhY2t1cFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29uc3QgYXV0aFRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xuXG4gICAgaWYgKCFhdXRoVG9rZW4pIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdUZW50YXRpdmEgZGUgY3JpYcOnw6NvIGRlIGJhY2t1cCBuw6NvIGF1dG9yaXphZGEnLCB7IGVuZHBvaW50OiAnL2FwaS9iYWNrdXAnIH0pO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0FkbWluID0gYXdhaXQgdmVyaWZ5QWRtaW4oYXV0aFRva2VuKTtcbiAgICBpZiAoIWlzQWRtaW4pIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdUZW50YXRpdmEgZGUgY3JpYcOnw6NvIGRlIGJhY2t1cCBwb3IgbsOjby1hZG1pbicsIHsgXG4gICAgICAgIGVuZHBvaW50OiAnL2FwaS9iYWNrdXAnXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDMgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBhY3Rpb24sIGZpbGVuYW1lIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmIChhY3Rpb24gPT09ICdjcmVhdGUnKSB7XG4gICAgICBjb25zdCBiYWNrdXAgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJyxcbiAgICAgICAgZGF0YToge30gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgdG90YWxSZWNvcmRzOiAwLFxuICAgICAgICAgIHRhYmxlc0NvdW50OiAwXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIExpc3RhIGRlIHRhYmVsYXMgcGVybWl0aWRhcyBwYXJhIGJhY2t1cCBjb20gb3JkZW0gZGUgZGVwZW5kw6puY2lhXG4gICAgICBjb25zdCBhbGxvd2VkVGFibGVzID0ge1xuICAgICAgICAndXNlcnMnOiAnU0VMRUNUICogRlJPTSB1c2VycycsXG4gICAgICAgICdwcm9kdWN0cyc6ICdTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzJywgXG4gICAgICAgICdtb3ZlbWVudHMnOiAnU0VMRUNUICogRlJPTSBtb3ZlbWVudHMnLFxuICAgICAgICAnYWNjb3VudHMnOiAnU0VMRUNUICogRlJPTSBhY2NvdW50cydcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHRhYmxlcyA9IE9iamVjdC5rZXlzKGFsbG93ZWRUYWJsZXMpO1xuICAgICAgbGV0IHRvdGFsUmVjb3JkcyA9IDA7XG4gICAgICBcbiAgICAgIC8vIFVzYXIgdHJhbnNhw6fDo28gcGFyYSBnYXJhbnRpciBjb25zaXN0w6puY2lhIGRvcyBkYWRvc1xuICAgICAgYXdhaXQgd2l0aFRyYW5zYWN0aW9uKGFzeW5jIChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgdGFibGUgb2YgdGFibGVzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFVzYXIgcXVlcnkgcHLDqS1kZWZpbmlkYSBwYXJhIGV2aXRhciBTUUwgaW5qZWN0aW9uXG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9IGFsbG93ZWRUYWJsZXNbdGFibGUgYXMga2V5b2YgdHlwZW9mIGFsbG93ZWRUYWJsZXNdO1xuICAgICAgICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKHF1ZXJ5KTtcbiAgICAgICAgICAgIGJhY2t1cC5kYXRhW3RhYmxlXSA9IHJvd3M7XG4gICAgICAgICAgICB0b3RhbFJlY29yZHMgKz0gKHJvd3MgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSkubGVuZ3RoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEJhY2t1cCBkYSB0YWJlbGEgJHt0YWJsZX0gY29uY2x1w61kb2AsIHsgXG4gICAgICAgICAgICAgIHJlY29yZHM6IChyb3dzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+W10pLmxlbmd0aCBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihgRXJybyBhbyBmYXplciBiYWNrdXAgZGEgdGFiZWxhICR7dGFibGV9YCwgZXJyb3IpO1xuICAgICAgICAgICAgYmFja3VwLmRhdGFbdGFibGVdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYmFja3VwLm1ldGFkYXRhLnRvdGFsUmVjb3JkcyA9IHRvdGFsUmVjb3JkcztcbiAgICAgIGJhY2t1cC5tZXRhZGF0YS50YWJsZXNDb3VudCA9IE9iamVjdC5rZXlzKGJhY2t1cC5kYXRhKS5sZW5ndGg7XG5cbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJyk7XG4gICAgICBjb25zdCBiYWNrdXBEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3NyYycsICdiYWNrdXBzJyk7XG4gICAgICBjb25zdCBiYWNrdXBGaWxlID0gcGF0aC5qb2luKGJhY2t1cERpciwgYGJhY2t1cF8ke3RpbWVzdGFtcH0uanNvbmApO1xuICAgICAgXG4gICAgICAvLyBDcmlhciBkaXJldMOzcmlvIHNlIG7Do28gZXhpc3RpclxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZnMubWtkaXIoYmFja3VwRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0RpcmV0w7NyaW8gZGUgYmFja3VwIGNyaWFkbycsIHsgcGF0aDogYmFja3VwRGlyIH0pO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIERpcmV0w7NyaW8gasOhIGV4aXN0ZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFc2NyZXZlciBiYWNrdXAgZGUgZm9ybWEgYXNzw61uY3JvbmEgZSBvdGltaXphZGFcbiAgICAgIGNvbnN0IGJhY2t1cERhdGEgPSBKU09OLnN0cmluZ2lmeShiYWNrdXAsIG51bGwsIDIpO1xuICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKGJhY2t1cEZpbGUsIGJhY2t1cERhdGEsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KGJhY2t1cEZpbGUpO1xuICAgICAgY29uc3Qgc2l6ZUtCID0gKHN0YXRzLnNpemUgLyAxMDI0KS50b0ZpeGVkKDIpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbygnQmFja3VwIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICBhY3Rpb246ICdjcmVhdGUnLFxuICAgICAgICBmaWxlbmFtZTogcGF0aC5iYXNlbmFtZShiYWNrdXBGaWxlKSxcbiAgICAgICAgc2l6ZTogc3RhdHMuc2l6ZSxcbiAgICAgICAgdG90YWxSZWNvcmRzLFxuICAgICAgICB0YWJsZXNDb3VudDogYmFja3VwLm1ldGFkYXRhLnRhYmxlc0NvdW50LFxuICAgICAgICBkdXJhdGlvbjogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBtZXNzYWdlOiAnQmFja3VwIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZmlsZW5hbWU6IHBhdGguYmFzZW5hbWUoYmFja3VwRmlsZSksXG4gICAgICAgIHNpemU6IGAke3NpemVLQn0gS0JgLFxuICAgICAgICBzaXplRm9ybWF0dGVkOiBmb3JtYXRCeXRlcyhzdGF0cy5zaXplKSxcbiAgICAgICAgdGltZXN0YW1wOiBiYWNrdXAudGltZXN0YW1wLFxuICAgICAgICB0b3RhbFJlY29yZHMsXG4gICAgICAgIHRhYmxlc0NvdW50OiBiYWNrdXAubWV0YWRhdGEudGFibGVzQ291bnQsXG4gICAgICAgIHRhYmxlczogT2JqZWN0LmtleXMoYmFja3VwLmRhdGEpLm1hcCh0YWJsZSA9PiAoe1xuICAgICAgICAgIG5hbWU6IHRhYmxlLFxuICAgICAgICAgIHJlY29yZHM6IEFycmF5LmlzQXJyYXkoYmFja3VwLmRhdGFbdGFibGVdKSA/IGJhY2t1cC5kYXRhW3RhYmxlXS5sZW5ndGggOiAwXG4gICAgICAgIH0pKVxuICAgICAgfSk7XG4gICAgICBcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3Jlc3RvcmUnICYmIGZpbGVuYW1lKSB7XG4gICAgICAvLyBSZXN0YXVyYXIgYmFja3VwXG4gICAgICBjb25zdCBiYWNrdXBEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3NyYycsICdiYWNrdXBzJyk7XG4gICAgICBjb25zdCBiYWNrdXBGaWxlUGF0aCA9IHBhdGguam9pbihiYWNrdXBEaXIsIGZpbGVuYW1lKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZpY2FyIHNlIGFycXVpdm8gZXhpc3RlXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBmcy5hY2Nlc3MoYmFja3VwRmlsZVBhdGgpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdCYWNrdXAgZmlsZSBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIExlciBlIHJlc3RhdXJhciBiYWNrdXBcbiAgICAgIGNvbnN0IGJhY2t1cENvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShiYWNrdXBGaWxlUGF0aCwgJ3V0ZjgnKTtcbiAgICAgIGNvbnN0IGJhY2t1cCA9IEpTT04ucGFyc2UoYmFja3VwQ29udGVudCk7XG4gICAgICBcbiAgICAgIGxldCByZXN0b3JlZFJlY29yZHMgPSAwO1xuICAgICAgXG4gICAgICBhd2FpdCB3aXRoVHJhbnNhY3Rpb24oYXN5bmMgKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgLy8gRGVzYWJpbGl0YXIgdmVyaWZpY2HDp8O1ZXMgZGUgY2hhdmUgZXN0cmFuZ2VpcmFcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKCdTRVQgRk9SRUlHTl9LRVlfQ0hFQ0tTID0gMCcpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdG9yZWRUYWJsZXMgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlc3RhdXJhciBjYWRhIHRhYmVsYVxuICAgICAgICBmb3IgKGNvbnN0IFt0YWJsZU5hbWUsIHRhYmxlRGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoYmFja3VwLmRhdGEpKSB7XG4gICAgICAgICAgLy8gTGltcGFyIHRhYmVsYSBhdHVhbFxuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShgREVMRVRFIEZST00gJHt0YWJsZU5hbWV9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCh0YWJsZURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gT2J0ZXIgY29sdW5hcyBkYSBwcmltZWlyYSBsaW5oYVxuICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IE9iamVjdC5rZXlzKCh0YWJsZURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSlbMF0pO1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJzID0gY29sdW1ucy5tYXAoKCkgPT4gJz8nKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgY29uc3QgY29sdW1uTmFtZXMgPSBjb2x1bW5zLmpvaW4oJywgJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGluc2VydFF1ZXJ5ID0gYElOU0VSVCBJTlRPICR7dGFibGVOYW1lfSAoJHtjb2x1bW5OYW1lc30pIFZBTFVFUyAoJHtwbGFjZWhvbGRlcnN9KWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEluc2VyaXIgZGFkb3NcbiAgICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mICh0YWJsZURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gY29sdW1ucy5tYXAoY29sID0+IChyb3cgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2NvbF0pO1xuICAgICAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoaW5zZXJ0UXVlcnksIHZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJlc3RvcmVkUmVjb3JkcyArPSAodGFibGVEYXRhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+W10pLmxlbmd0aDtcbiAgICAgICAgICByZXN0b3JlZFRhYmxlcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IHRhYmxlTmFtZSxcbiAgICAgICAgICAgIHJlY29yZHM6ICh0YWJsZURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSkubGVuZ3RoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUYWJlbGEgJHt0YWJsZU5hbWV9IHJlc3RhdXJhZGFgLCB7IHJlY29yZHM6ICh0YWJsZURhdGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSkubGVuZ3RoIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZWFiaWxpdGFyIHZlcmlmaWNhw6fDtWVzIGRlIGNoYXZlIGVzdHJhbmdlaXJhXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSgnU0VUIEZPUkVJR05fS0VZX0NIRUNLUyA9IDEnKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbygnQmFja3VwIHJlc3RvcmVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgYWN0aW9uOiAncmVzdG9yZScsXG4gICAgICAgIGZpbGVuYW1lLFxuICAgICAgICByZXN0b3JlZFJlY29yZHMsXG4gICAgICAgIGR1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIG1lc3NhZ2U6ICdCYWNrdXAgcmVzdG9yZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgYmFja3VwRGF0ZTogYmFja3VwLnRpbWVzdGFtcCxcbiAgICAgICAgcmVzdG9yZWRSZWNvcmRzXG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBhY3Rpb24nIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gYmFja3VwIG9wZXJhdGlvbicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgaW4gYmFja3VwIG9wZXJhdGlvbicsIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG4vLyBERUxFVEUgLSBEZWxldGFyIGJhY2t1cFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29uc3QgYXV0aFRva2VuID0gY29va2llU3RvcmUuZ2V0KCdhdXRoX3Rva2VuJyk/LnZhbHVlO1xuXG4gICAgaWYgKCFhdXRoVG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNBZG1pbiA9IGF3YWl0IHZlcmlmeUFkbWluKGF1dGhUb2tlbik7XG4gICAgaWYgKCFpc0FkbWluKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAzIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0LnRleHQoKTtcbiAgICBsb2dnZXIuZGVidWcoJ0RFTEVURSBiYWNrdXAgcmVxdWVzdCBib2R5IHJlY2VpdmVkJywgeyBib2R5IH0pO1xuICAgIGxldCBmaWxlbmFtZSA9ICcnO1xuICAgIHRyeSB7XG4gICAgICBmaWxlbmFtZSA9IEpTT04ucGFyc2UoYm9keSkuZmlsZW5hbWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgSlNPTiBpbiBERUxFVEUgYmFja3VwJywgZXJyKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdFcnJvIGFvIHByb2Nlc3NhciBKU09OJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWZpbGVuYW1lKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRmlsZW5hbWUgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIGxvZ2dlci5pbmZvKCdERUxFVEUgYmFja3VwIHJlcXVlc3QnLCB7IGZpbGVuYW1lIH0pO1xuXG4gICAgY29uc3QgYmFja3VwRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdzcmMnLCAnYmFja3VwcycpO1xuICAgIGNvbnN0IGJhY2t1cEZpbGVQYXRoID0gcGF0aC5qb2luKGJhY2t1cERpciwgZmlsZW5hbWUpO1xuICAgIFxuICAgIC8vIFZlcmlmaWNhciBzZSBhcnF1aXZvIGV4aXN0ZVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBmcy5hY2Nlc3MoYmFja3VwRmlsZVBhdGgpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0JhY2t1cCBmaWxlIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gRGVsZXRhciBhcnF1aXZvXG4gICAgYXdhaXQgZnMudW5saW5rKGJhY2t1cEZpbGVQYXRoKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnQmFja3VwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGJhY2t1cCcsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgZGVsZXRpbmcgYmFja3VwJywgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByb21pc2VzIiwiZnMiLCJwYXRoIiwiY29va2llcyIsImRiUG9vbCIsIndpdGhUcmFuc2FjdGlvbiIsImxvZ2dlciIsInZlcmlmeUFkbWluIiwiYXV0aFRva2VuIiwidXNlcm5hbWUiLCJpbmNsdWRlcyIsInNwbGl0IiwidXNlcnMiLCJleGVjdXRlIiwibGVuZ3RoIiwidXNlciIsIkJvb2xlYW4iLCJpc19hZG1pbiIsImVycm9yIiwiR0VUIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImNvb2tpZVN0b3JlIiwiZ2V0IiwidmFsdWUiLCJpbmZvIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJpc0FkbWluIiwiZW5kcG9pbnQiLCJiYWNrdXBEaXIiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImZpbGVzIiwicmVhZGRpciIsImJhY2t1cEZpbGVzIiwiZmlsdGVyIiwiZmlsZSIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsImJhY2t1cHMiLCJmaWxlUHJvbWlzZXMiLCJtYXAiLCJmaWxlUGF0aCIsInN0YXRzIiwic3RhdCIsInNpemVLQiIsInNpemUiLCJ0b0ZpeGVkIiwiZmlsZW5hbWUiLCJzaXplRm9ybWF0dGVkIiwiZm9ybWF0Qnl0ZXMiLCJjcmVhdGVkIiwibXRpbWUiLCJ0b0lTT1N0cmluZyIsIndhcm4iLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsInB1c2giLCJiYWNrdXAiLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwiY291bnQiLCJkdXJhdGlvbiIsImJ5dGVzIiwiayIsInNpemVzIiwiaSIsIk1hdGgiLCJmbG9vciIsImxvZyIsInBhcnNlRmxvYXQiLCJwb3ciLCJQT1NUIiwicmVxdWVzdCIsImFjdGlvbiIsInRpbWVzdGFtcCIsInZlcnNpb24iLCJkYXRhIiwibWV0YWRhdGEiLCJ0b3RhbFJlY29yZHMiLCJ0YWJsZXNDb3VudCIsImFsbG93ZWRUYWJsZXMiLCJ0YWJsZXMiLCJPYmplY3QiLCJrZXlzIiwiY29ubmVjdGlvbiIsInRhYmxlIiwicXVlcnkiLCJyb3dzIiwiZGVidWciLCJyZWNvcmRzIiwicmVwbGFjZSIsImJhY2t1cEZpbGUiLCJta2RpciIsInJlY3Vyc2l2ZSIsImJhY2t1cERhdGEiLCJKU09OIiwic3RyaW5naWZ5Iiwid3JpdGVGaWxlIiwiZW5jb2RpbmciLCJiYXNlbmFtZSIsIm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJiYWNrdXBGaWxlUGF0aCIsImFjY2VzcyIsImJhY2t1cENvbnRlbnQiLCJyZWFkRmlsZSIsInBhcnNlIiwicmVzdG9yZWRSZWNvcmRzIiwicmVzdG9yZWRUYWJsZXMiLCJ0YWJsZU5hbWUiLCJ0YWJsZURhdGEiLCJlbnRyaWVzIiwiY29sdW1ucyIsInBsYWNlaG9sZGVycyIsImNvbHVtbk5hbWVzIiwiaW5zZXJ0UXVlcnkiLCJyb3ciLCJ2YWx1ZXMiLCJjb2wiLCJiYWNrdXBEYXRlIiwiREVMRVRFIiwiYm9keSIsInRleHQiLCJlcnIiLCJ1bmxpbmsiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/backup/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!********************************************************!*\
  !*** ./src/node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \********************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./src/node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "(rsc)/./src/utils/database-pool.ts":
/*!************************************!*\
  !*** ./src/utils/database-pool.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   dbPool: () => (/* binding */ dbPool),\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./src/node_modules/mysql2/promise.js\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logger */ \"(rsc)/./src/utils/logger.ts\");\n// Sistema de pool de conexes otimizado para MySQL\n\n\nclass DatabasePool {\n    constructor(){\n        this.pool = null;\n        this.isInitialized = false;\n        console.error(' [POOL-CONFIG] INICIALIZANDO POOL DE CONEXES ');\n        console.error(' [POOL-CONFIG] DB_HOST:', process.env.DB_HOST);\n        console.error(' [POOL-CONFIG] DB_PORT:', process.env.DB_PORT);\n        console.error(' [POOL-CONFIG] DB_USER:', process.env.DB_USER);\n        console.error(' [POOL-CONFIG] DB_NAME:', process.env.DB_NAME);\n        console.error(' [POOL-CONFIG] DB_PASSWORD definido:', !!process.env.DB_PASSWORD);\n        // Forar o uso das variveis de ambiente corretas\n        const dbHost = process.env.DB_HOST;\n        const dbPort = process.env.DB_PORT;\n        const dbUser = process.env.DB_USER;\n        const dbPassword = process.env.DB_PASSWORD;\n        const dbName = process.env.DB_NAME;\n        console.error(' [POOL-CONFIG] Valores antes da configurao:');\n        console.error(' [POOL-CONFIG] Host final:', dbHost);\n        console.error(' [POOL-CONFIG] Port final:', dbPort);\n        console.error(' [POOL-CONFIG] User final:', dbUser);\n        if (!dbHost || !dbPort || !dbUser || !dbPassword || !dbName) {\n            console.error(' [POOL-CONFIG] ERRO: Variveis de ambiente obrigatrias no definidas!');\n            console.error(' [POOL-CONFIG] DB_HOST:', dbHost);\n            console.error(' [POOL-CONFIG] DB_PORT:', dbPort);\n            console.error(' [POOL-CONFIG] DB_USER:', dbUser);\n            console.error(' [POOL-CONFIG] DB_PASSWORD definido:', !!dbPassword);\n            console.error(' [POOL-CONFIG] DB_NAME:', dbName);\n            throw new Error('Variveis de ambiente do banco de dados no esto definidas corretamente');\n        }\n        this.config = {\n            host: dbHost,\n            port: parseInt(dbPort),\n            user: dbUser,\n            password: dbPassword,\n            database: dbName,\n            connectionLimit: parseInt(process.env.DB_CONNECTION_LIMIT || '10'),\n            acquireTimeout: parseInt(process.env.DB_ACQUIRE_TIMEOUT || '60000'),\n            timeout: parseInt(process.env.DB_TIMEOUT || '60000'),\n            reconnect: true,\n            idleTimeout: parseInt(process.env.DB_IDLE_TIMEOUT || '300000'),\n            queueLimit: parseInt(process.env.DB_QUEUE_LIMIT || '0') // 0 = sem limite\n        };\n        console.error(' [POOL-CONFIG] Configurao final do pool:', {\n            host: this.config.host,\n            port: this.config.port,\n            user: this.config.user,\n            database: this.config.database\n        });\n        console.error(' [POOL-CONFIG] FIM DA CONFIGURAO ');\n    }\n    static getInstance() {\n        if (!DatabasePool.instance) {\n            DatabasePool.instance = new DatabasePool();\n        }\n        return DatabasePool.instance;\n    }\n    async initialize() {\n        if (this.isInitialized && this.pool) {\n            return;\n        }\n        try {\n            this.pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n                host: this.config.host,\n                port: this.config.port,\n                user: this.config.user,\n                password: this.config.password,\n                database: this.config.database,\n                connectionLimit: this.config.connectionLimit,\n                queueLimit: this.config.queueLimit,\n                // Configuraes adicionais para otimizao\n                charset: 'utf8mb4',\n                timezone: 'local',\n                supportBigNumbers: true,\n                bigNumberStrings: true,\n                dateStrings: false,\n                multipleStatements: false,\n                // Pool event handlers\n                typeCast: function(field, next) {\n                    const fieldObj = field;\n                    if (fieldObj.type === 'TINY' && fieldObj.length === 1) {\n                        return fieldObj.string() === '1'; // Convert TINYINT(1) to boolean\n                    }\n                    return next();\n                }\n            });\n            // Event listeners para monitoramento\n            this.pool.on('connection', (connection)=>{\n                _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug('Nova conexo estabelecida', {\n                    connectionId: connection.threadId\n                });\n            });\n            // Remover event listener 'error' pois no  suportado pelo tipo Pool\n            this.pool.on('release', (connection)=>{\n                _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug('Conexo liberada', {\n                    connectionId: connection.threadId\n                });\n            });\n            // Testar conexo inicial\n            await this.testConnection();\n            this.isInitialized = true;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Pool de conexes inicializado com sucesso', {\n                host: this.config.host,\n                database: this.config.database,\n                connectionLimit: this.config.connectionLimit\n            });\n        } catch (error) {\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Erro ao inicializar pool de conexes', error);\n            throw error;\n        }\n    }\n    async testConnection() {\n        if (!this.pool) {\n            throw new Error('Pool no inicializado');\n        }\n        const connection = await this.pool.getConnection();\n        try {\n            await connection.ping();\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Teste de conexo bem-sucedido');\n        } finally{\n            connection.release();\n        }\n    }\n    handleDisconnect() {\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn('Conexo perdida, tentando reconectar...');\n        setTimeout(async ()=>{\n            try {\n                await this.initialize();\n                _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Reconexo bem-sucedida');\n            } catch (error) {\n                _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Falha na reconexo', error);\n                this.handleDisconnect(); // Tentar novamente\n            }\n        }, 2000);\n    }\n    async getConnection() {\n        if (!this.isInitialized || !this.pool) {\n            await this.initialize();\n        }\n        if (!this.pool) {\n            throw new Error('Pool de conexes no disponvel');\n        }\n        const startTime = Date.now();\n        try {\n            const connection = await this.pool.getConnection();\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.debug('Conexo obtida do pool', {\n                duration: `${duration}ms`,\n                connectionId: connection.threadId\n            });\n            return connection;\n        } catch (error) {\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Erro ao obter conexo do pool', error);\n            throw error;\n        }\n    }\n    async execute(query, params, options) {\n        const connection = await this.getConnection();\n        const startTime = Date.now();\n        try {\n            // Configurar timeout se especificado\n            if (options?.timeout) {\n                await connection.query('SET SESSION wait_timeout = ?', [\n                    Math.ceil(options.timeout / 1000)\n                ]);\n            }\n            const result = await connection.execute(query, params);\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Database operation completed', {\n                operation: 'execute',\n                table: this.extractTableName(query),\n                duration\n            });\n            return result;\n        } catch (error) {\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Database operation failed', {\n                operation: 'execute',\n                table: this.extractTableName(query),\n                duration,\n                error: error.message\n            });\n            throw error;\n        } finally{\n            connection.release();\n        }\n    }\n    async query(query, params) {\n        const connection = await this.getConnection();\n        const startTime = Date.now();\n        try {\n            const result = await connection.query(query, params);\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Database query completed', {\n                operation: 'query',\n                table: this.extractTableName(query),\n                duration\n            });\n            return result;\n        } catch (error) {\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Database query failed', {\n                operation: 'query',\n                table: this.extractTableName(query),\n                duration,\n                error: error.message\n            });\n            throw error;\n        } finally{\n            connection.release();\n        }\n    }\n    // Transao com rollback automtico em caso de erro\n    async transaction(callback) {\n        const connection = await this.getConnection();\n        const startTime = Date.now();\n        try {\n            await connection.beginTransaction();\n            const result = await callback(connection);\n            await connection.commit();\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Database transaction completed', {\n                operation: 'transaction',\n                table: 'multiple',\n                duration\n            });\n            return result;\n        } catch (error) {\n            await connection.rollback();\n            const duration = Date.now() - startTime;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Database transaction failed', {\n                operation: 'transaction',\n                table: 'multiple',\n                duration,\n                error: error.message\n            });\n            throw error;\n        } finally{\n            connection.release();\n        }\n    }\n    // Extrair nome da tabela da query para logs\n    extractTableName(query) {\n        const match = query.match(/(?:FROM|INTO|UPDATE|JOIN)\\s+`?([a-zA-Z_][a-zA-Z0-9_]*)`?/i);\n        return match ? match[1] : 'unknown';\n    }\n    // Obter estatsticas do pool\n    getPoolStats() {\n        if (!this.pool) {\n            return null;\n        }\n        return {\n            connectionLimit: this.config.connectionLimit,\n            acquireTimeout: this.config.acquireTimeout\n        };\n    }\n    // Fechar pool graciosamente\n    async close() {\n        if (this.pool) {\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Fechando pool de conexes...');\n            await this.pool.end();\n            this.pool = null;\n            this.isInitialized = false;\n            _logger__WEBPACK_IMPORTED_MODULE_1__.logger.info('Pool de conexes fechado');\n        }\n    }\n    // Health check\n    async healthCheck() {\n        try {\n            const startTime = Date.now();\n            await this.testConnection();\n            const responseTime = Date.now() - startTime;\n            return {\n                status: 'healthy',\n                details: {\n                    responseTime: `${responseTime}ms`,\n                    poolStats: this.getPoolStats(),\n                    config: {\n                        host: this.config.host,\n                        database: this.config.database,\n                        connectionLimit: this.config.connectionLimit\n                    }\n                }\n            };\n        } catch (error) {\n            return {\n                status: 'unhealthy',\n                details: {\n                    error: error.message,\n                    poolStats: this.getPoolStats()\n                }\n            };\n        }\n    }\n}\n// Instncia singleton\nconst dbPool = DatabasePool.getInstance();\n// Funo de convenincia para manter compatibilidade\nasync function connectToDatabase() {\n    return await dbPool.getConnection();\n}\n// Funo para executar queries com pool\nasync function executeQuery(query, params) {\n    return await dbPool.execute(query, params);\n}\n// Funo para transaes\nasync function withTransaction(callback) {\n    return await dbPool.transaction(callback);\n}\n// Inicializar pool na importao (apenas em ambiente servidor)\nif (true) {\n    dbPool.initialize().catch((error)=>{\n        _logger__WEBPACK_IMPORTED_MODULE_1__.logger.error('Falha ao inicializar pool de conexes na importao', error);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvZGF0YWJhc2UtcG9vbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxtREFBbUQ7QUFFaEI7QUFDRDtBQWdCbEMsTUFBTUU7SUFNSixhQUFzQjthQUpkQyxPQUEwQjthQUUxQkMsZ0JBQWdCO1FBR3RCQyxRQUFRQyxLQUFLLENBQUM7UUFDZEQsUUFBUUMsS0FBSyxDQUFDLDZCQUE2QkMsUUFBUUMsR0FBRyxDQUFDQyxPQUFPO1FBQzlESixRQUFRQyxLQUFLLENBQUMsNkJBQTZCQyxRQUFRQyxHQUFHLENBQUNFLE9BQU87UUFDOURMLFFBQVFDLEtBQUssQ0FBQyw2QkFBNkJDLFFBQVFDLEdBQUcsQ0FBQ0csT0FBTztRQUM5RE4sUUFBUUMsS0FBSyxDQUFDLDZCQUE2QkMsUUFBUUMsR0FBRyxDQUFDSSxPQUFPO1FBQzlEUCxRQUFRQyxLQUFLLENBQUMsMENBQTBDLENBQUMsQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDSyxXQUFXO1FBRWpGLGtEQUFrRDtRQUNsRCxNQUFNQyxTQUFTUCxRQUFRQyxHQUFHLENBQUNDLE9BQU87UUFDbEMsTUFBTU0sU0FBU1IsUUFBUUMsR0FBRyxDQUFDRSxPQUFPO1FBQ2xDLE1BQU1NLFNBQVNULFFBQVFDLEdBQUcsQ0FBQ0csT0FBTztRQUNsQyxNQUFNTSxhQUFhVixRQUFRQyxHQUFHLENBQUNLLFdBQVc7UUFDMUMsTUFBTUssU0FBU1gsUUFBUUMsR0FBRyxDQUFDSSxPQUFPO1FBRWxDUCxRQUFRQyxLQUFLLENBQUM7UUFDZEQsUUFBUUMsS0FBSyxDQUFDLGdDQUFnQ1E7UUFDOUNULFFBQVFDLEtBQUssQ0FBQyxnQ0FBZ0NTO1FBQzlDVixRQUFRQyxLQUFLLENBQUMsZ0NBQWdDVTtRQUU5QyxJQUFJLENBQUNGLFVBQVUsQ0FBQ0MsVUFBVSxDQUFDQyxVQUFVLENBQUNDLGNBQWMsQ0FBQ0MsUUFBUTtZQUMzRGIsUUFBUUMsS0FBSyxDQUFDO1lBQ2RELFFBQVFDLEtBQUssQ0FBQyw0QkFBNEJRO1lBQzFDVCxRQUFRQyxLQUFLLENBQUMsNEJBQTRCUztZQUMxQ1YsUUFBUUMsS0FBSyxDQUFDLDRCQUE0QlU7WUFDMUNYLFFBQVFDLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDVztZQUN6RFosUUFBUUMsS0FBSyxDQUFDLDRCQUE0Qlk7WUFDMUMsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsSUFBSSxDQUFDQyxNQUFNLEdBQUc7WUFDWkMsTUFBTVA7WUFDTlEsTUFBTUMsU0FBU1I7WUFDZlMsTUFBTVI7WUFDTlMsVUFBVVI7WUFDVlMsVUFBVVI7WUFDVlMsaUJBQWlCSixTQUFTaEIsUUFBUUMsR0FBRyxDQUFDb0IsbUJBQW1CLElBQUk7WUFDN0RDLGdCQUFnQk4sU0FBU2hCLFFBQVFDLEdBQUcsQ0FBQ3NCLGtCQUFrQixJQUFJO1lBQzNEQyxTQUFTUixTQUFTaEIsUUFBUUMsR0FBRyxDQUFDd0IsVUFBVSxJQUFJO1lBQzVDQyxXQUFXO1lBQ1hDLGFBQWFYLFNBQVNoQixRQUFRQyxHQUFHLENBQUMyQixlQUFlLElBQUk7WUFDckRDLFlBQVliLFNBQVNoQixRQUFRQyxHQUFHLENBQUM2QixjQUFjLElBQUksS0FBSyxpQkFBaUI7UUFDM0U7UUFFQWhDLFFBQVFDLEtBQUssQ0FBQyxnREFBZ0Q7WUFDNURlLE1BQU0sSUFBSSxDQUFDRCxNQUFNLENBQUNDLElBQUk7WUFDdEJDLE1BQU0sSUFBSSxDQUFDRixNQUFNLENBQUNFLElBQUk7WUFDdEJFLE1BQU0sSUFBSSxDQUFDSixNQUFNLENBQUNJLElBQUk7WUFDdEJFLFVBQVUsSUFBSSxDQUFDTixNQUFNLENBQUNNLFFBQVE7UUFDaEM7UUFDQXJCLFFBQVFDLEtBQUssQ0FBQztJQUNoQjtJQUVBLE9BQWNnQyxjQUE0QjtRQUN4QyxJQUFJLENBQUNwQyxhQUFhcUMsUUFBUSxFQUFFO1lBQzFCckMsYUFBYXFDLFFBQVEsR0FBRyxJQUFJckM7UUFDOUI7UUFDQSxPQUFPQSxhQUFhcUMsUUFBUTtJQUM5QjtJQUVBLE1BQWFDLGFBQTRCO1FBQ3ZDLElBQUksSUFBSSxDQUFDcEMsYUFBYSxJQUFJLElBQUksQ0FBQ0QsSUFBSSxFQUFFO1lBQ25DO1FBQ0Y7UUFFQSxJQUFJO1lBQ0YsSUFBSSxDQUFDQSxJQUFJLEdBQUdILHNEQUFnQixDQUFDO2dCQUMzQnFCLE1BQU0sSUFBSSxDQUFDRCxNQUFNLENBQUNDLElBQUk7Z0JBQ3RCQyxNQUFNLElBQUksQ0FBQ0YsTUFBTSxDQUFDRSxJQUFJO2dCQUN0QkUsTUFBTSxJQUFJLENBQUNKLE1BQU0sQ0FBQ0ksSUFBSTtnQkFDdEJDLFVBQVUsSUFBSSxDQUFDTCxNQUFNLENBQUNLLFFBQVE7Z0JBQzlCQyxVQUFVLElBQUksQ0FBQ04sTUFBTSxDQUFDTSxRQUFRO2dCQUM5QkMsaUJBQWlCLElBQUksQ0FBQ1AsTUFBTSxDQUFDTyxlQUFlO2dCQUM1Q1MsWUFBWSxJQUFJLENBQUNoQixNQUFNLENBQUNnQixVQUFVO2dCQUNsQywyQ0FBMkM7Z0JBQzNDTSxTQUFTO2dCQUNUQyxVQUFVO2dCQUNWQyxtQkFBbUI7Z0JBQ25CQyxrQkFBa0I7Z0JBQ2xCQyxhQUFhO2dCQUNiQyxvQkFBb0I7Z0JBQ3BCLHNCQUFzQjtnQkFDdEJDLFVBQVUsU0FBVUMsS0FBYyxFQUFFQyxJQUFtQjtvQkFDckQsTUFBTUMsV0FBV0Y7b0JBQ2pCLElBQUlFLFNBQVNDLElBQUksS0FBSyxVQUFVRCxTQUFTRSxNQUFNLEtBQUssR0FBRzt3QkFDckQsT0FBUUYsU0FBU0csTUFBTSxPQUFPLEtBQU0sZ0NBQWdDO29CQUN0RTtvQkFDQSxPQUFPSjtnQkFDVDtZQUNGO1lBRUEscUNBQXFDO1lBQ3JDLElBQUksQ0FBQy9DLElBQUksQ0FBQ29ELEVBQUUsQ0FBQyxjQUFjLENBQUNDO2dCQUMxQnZELDJDQUFNQSxDQUFDd0QsS0FBSyxDQUFDLDZCQUE2QjtvQkFBRUMsY0FBY0YsV0FBV0csUUFBUTtnQkFBQztZQUNoRjtZQUVBLHFFQUFxRTtZQUVyRSxJQUFJLENBQUN4RCxJQUFJLENBQUNvRCxFQUFFLENBQUMsV0FBVyxDQUFDQztnQkFDdkJ2RCwyQ0FBTUEsQ0FBQ3dELEtBQUssQ0FBQyxvQkFBb0I7b0JBQUVDLGNBQWNGLFdBQVdHLFFBQVE7Z0JBQUM7WUFDdkU7WUFFQSx5QkFBeUI7WUFDekIsTUFBTSxJQUFJLENBQUNDLGNBQWM7WUFFekIsSUFBSSxDQUFDeEQsYUFBYSxHQUFHO1lBQ3JCSCwyQ0FBTUEsQ0FBQzRELElBQUksQ0FBQyw2Q0FBNkM7Z0JBQ3ZEeEMsTUFBTSxJQUFJLENBQUNELE1BQU0sQ0FBQ0MsSUFBSTtnQkFDdEJLLFVBQVUsSUFBSSxDQUFDTixNQUFNLENBQUNNLFFBQVE7Z0JBQzlCQyxpQkFBaUIsSUFBSSxDQUFDUCxNQUFNLENBQUNPLGVBQWU7WUFDOUM7UUFFRixFQUFFLE9BQU9yQixPQUFPO1lBQ2RMLDJDQUFNQSxDQUFDSyxLQUFLLENBQUMsd0NBQXdDQTtZQUNyRCxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFjc0QsaUJBQWdDO1FBQzVDLElBQUksQ0FBQyxJQUFJLENBQUN6RCxJQUFJLEVBQUU7WUFDZCxNQUFNLElBQUlnQixNQUFNO1FBQ2xCO1FBRUEsTUFBTXFDLGFBQWEsTUFBTSxJQUFJLENBQUNyRCxJQUFJLENBQUMyRCxhQUFhO1FBQ2hELElBQUk7WUFDRixNQUFNTixXQUFXTyxJQUFJO1lBQ3JCOUQsMkNBQU1BLENBQUM0RCxJQUFJLENBQUM7UUFDZCxTQUFVO1lBQ1JMLFdBQVdRLE9BQU87UUFDcEI7SUFDRjtJQUVRQyxtQkFBeUI7UUFDL0JoRSwyQ0FBTUEsQ0FBQ2lFLElBQUksQ0FBQztRQUVaQyxXQUFXO1lBQ1QsSUFBSTtnQkFDRixNQUFNLElBQUksQ0FBQzNCLFVBQVU7Z0JBQ3JCdkMsMkNBQU1BLENBQUM0RCxJQUFJLENBQUM7WUFDZCxFQUFFLE9BQU92RCxPQUFPO2dCQUNkTCwyQ0FBTUEsQ0FBQ0ssS0FBSyxDQUFDLHNCQUFzQkE7Z0JBQ25DLElBQUksQ0FBQzJELGdCQUFnQixJQUFJLG1CQUFtQjtZQUM5QztRQUNGLEdBQUc7SUFDTDtJQUVBLE1BQWFILGdCQUErQztRQUMxRCxJQUFJLENBQUMsSUFBSSxDQUFDMUQsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDRCxJQUFJLEVBQUU7WUFDckMsTUFBTSxJQUFJLENBQUNxQyxVQUFVO1FBQ3ZCO1FBRUEsSUFBSSxDQUFDLElBQUksQ0FBQ3JDLElBQUksRUFBRTtZQUNkLE1BQU0sSUFBSWdCLE1BQU07UUFDbEI7UUFFQSxNQUFNaUQsWUFBWUMsS0FBS0MsR0FBRztRQUMxQixJQUFJO1lBQ0YsTUFBTWQsYUFBYSxNQUFNLElBQUksQ0FBQ3JELElBQUksQ0FBQzJELGFBQWE7WUFDaEQsTUFBTVMsV0FBV0YsS0FBS0MsR0FBRyxLQUFLRjtZQUU5Qm5FLDJDQUFNQSxDQUFDd0QsS0FBSyxDQUFDLDBCQUEwQjtnQkFDckNjLFVBQVUsR0FBR0EsU0FBUyxFQUFFLENBQUM7Z0JBQ3pCYixjQUFjRixXQUFXRyxRQUFRO1lBQ25DO1lBRUEsT0FBT0g7UUFDVCxFQUFFLE9BQU9sRCxPQUFPO1lBQ2RMLDJDQUFNQSxDQUFDSyxLQUFLLENBQUMsaUNBQWlDQTtZQUM5QyxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFha0UsUUFDWEMsS0FBYSxFQUNiQyxNQUFjLEVBQ2RDLE9BQThCLEVBQ0s7UUFDbkMsTUFBTW5CLGFBQWEsTUFBTSxJQUFJLENBQUNNLGFBQWE7UUFDM0MsTUFBTU0sWUFBWUMsS0FBS0MsR0FBRztRQUUxQixJQUFJO1lBQ0YscUNBQXFDO1lBQ3JDLElBQUlLLFNBQVM1QyxTQUFTO2dCQUNwQixNQUFNeUIsV0FBV2lCLEtBQUssQ0FBQyxnQ0FBZ0M7b0JBQUNHLEtBQUtDLElBQUksQ0FBQ0YsUUFBUTVDLE9BQU8sR0FBRztpQkFBTTtZQUM1RjtZQUVBLE1BQU0rQyxTQUFTLE1BQU10QixXQUFXZ0IsT0FBTyxDQUFDQyxPQUFPQztZQUMvQyxNQUFNSCxXQUFXRixLQUFLQyxHQUFHLEtBQUtGO1lBRTlCbkUsMkNBQU1BLENBQUM0RCxJQUFJLENBQUMsZ0NBQWdDO2dCQUFFa0IsV0FBVztnQkFBV0MsT0FBTyxJQUFJLENBQUNDLGdCQUFnQixDQUFDUjtnQkFBUUY7WUFBUztZQUVsSCxPQUFPTztRQUNULEVBQUUsT0FBT3hFLE9BQU87WUFDZCxNQUFNaUUsV0FBV0YsS0FBS0MsR0FBRyxLQUFLRjtZQUM5Qm5FLDJDQUFNQSxDQUFDSyxLQUFLLENBQUMsNkJBQTZCO2dCQUFFeUUsV0FBVztnQkFBV0MsT0FBTyxJQUFJLENBQUNDLGdCQUFnQixDQUFDUjtnQkFBUUY7Z0JBQVVqRSxPQUFPLE1BQWlCNEUsT0FBTztZQUFDO1lBQ2pKLE1BQU01RTtRQUNSLFNBQVU7WUFDUmtELFdBQVdRLE9BQU87UUFDcEI7SUFDRjtJQUVBLE1BQWFTLE1BQ1hBLEtBQWEsRUFDYkMsTUFBYyxFQUNxQjtRQUNuQyxNQUFNbEIsYUFBYSxNQUFNLElBQUksQ0FBQ00sYUFBYTtRQUMzQyxNQUFNTSxZQUFZQyxLQUFLQyxHQUFHO1FBRTFCLElBQUk7WUFDRixNQUFNUSxTQUFTLE1BQU10QixXQUFXaUIsS0FBSyxDQUFDQSxPQUFPQztZQUM3QyxNQUFNSCxXQUFXRixLQUFLQyxHQUFHLEtBQUtGO1lBRTlCbkUsMkNBQU1BLENBQUM0RCxJQUFJLENBQUMsNEJBQTRCO2dCQUFFa0IsV0FBVztnQkFBU0MsT0FBTyxJQUFJLENBQUNDLGdCQUFnQixDQUFDUjtnQkFBUUY7WUFBUztZQUU1RyxPQUFPTztRQUNULEVBQUUsT0FBT3hFLE9BQU87WUFDZCxNQUFNaUUsV0FBV0YsS0FBS0MsR0FBRyxLQUFLRjtZQUM5Qm5FLDJDQUFNQSxDQUFDSyxLQUFLLENBQUMseUJBQXlCO2dCQUFFeUUsV0FBVztnQkFBU0MsT0FBTyxJQUFJLENBQUNDLGdCQUFnQixDQUFDUjtnQkFBUUY7Z0JBQVVqRSxPQUFPLE1BQWlCNEUsT0FBTztZQUFDO1lBQzNJLE1BQU01RTtRQUNSLFNBQVU7WUFDUmtELFdBQVdRLE9BQU87UUFDcEI7SUFDRjtJQUVBLG9EQUFvRDtJQUNwRCxNQUFhbUIsWUFDWEMsUUFBMEQsRUFDOUM7UUFDWixNQUFNNUIsYUFBYSxNQUFNLElBQUksQ0FBQ00sYUFBYTtRQUMzQyxNQUFNTSxZQUFZQyxLQUFLQyxHQUFHO1FBRTFCLElBQUk7WUFDRixNQUFNZCxXQUFXNkIsZ0JBQWdCO1lBRWpDLE1BQU1QLFNBQVMsTUFBTU0sU0FBUzVCO1lBRTlCLE1BQU1BLFdBQVc4QixNQUFNO1lBRXZCLE1BQU1mLFdBQVdGLEtBQUtDLEdBQUcsS0FBS0Y7WUFDOUJuRSwyQ0FBTUEsQ0FBQzRELElBQUksQ0FBQyxrQ0FBa0M7Z0JBQUVrQixXQUFXO2dCQUFlQyxPQUFPO2dCQUFZVDtZQUFTO1lBRXRHLE9BQU9PO1FBQ1QsRUFBRSxPQUFPeEUsT0FBTztZQUNkLE1BQU1rRCxXQUFXK0IsUUFBUTtZQUV6QixNQUFNaEIsV0FBV0YsS0FBS0MsR0FBRyxLQUFLRjtZQUM5Qm5FLDJDQUFNQSxDQUFDSyxLQUFLLENBQUMsK0JBQStCO2dCQUFFeUUsV0FBVztnQkFBZUMsT0FBTztnQkFBWVQ7Z0JBQVVqRSxPQUFPLE1BQWlCNEUsT0FBTztZQUFDO1lBRXJJLE1BQU01RTtRQUNSLFNBQVU7WUFDUmtELFdBQVdRLE9BQU87UUFDcEI7SUFDRjtJQUVBLDRDQUE0QztJQUNwQ2lCLGlCQUFpQlIsS0FBYSxFQUFVO1FBQzlDLE1BQU1lLFFBQVFmLE1BQU1lLEtBQUssQ0FBQztRQUMxQixPQUFPQSxRQUFRQSxLQUFLLENBQUMsRUFBRSxHQUFHO0lBQzVCO0lBRUEsNkJBQTZCO0lBQ3RCQyxlQUFvQjtRQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDdEYsSUFBSSxFQUFFO1lBQ2QsT0FBTztRQUNUO1FBRUEsT0FBTztZQUNMd0IsaUJBQWlCLElBQUksQ0FBQ1AsTUFBTSxDQUFDTyxlQUFlO1lBQzVDRSxnQkFBZ0IsSUFBSSxDQUFDVCxNQUFNLENBQUNTLGNBQWM7UUFLNUM7SUFDRjtJQUVBLDRCQUE0QjtJQUM1QixNQUFhNkQsUUFBdUI7UUFDbEMsSUFBSSxJQUFJLENBQUN2RixJQUFJLEVBQUU7WUFDYkYsMkNBQU1BLENBQUM0RCxJQUFJLENBQUM7WUFDWixNQUFNLElBQUksQ0FBQzFELElBQUksQ0FBQ3dGLEdBQUc7WUFDbkIsSUFBSSxDQUFDeEYsSUFBSSxHQUFHO1lBQ1osSUFBSSxDQUFDQyxhQUFhLEdBQUc7WUFDckJILDJDQUFNQSxDQUFDNEQsSUFBSSxDQUFDO1FBQ2Q7SUFDRjtJQUVBLGVBQWU7SUFDZixNQUFhK0IsY0FBMEU7UUFDckYsSUFBSTtZQUNGLE1BQU14QixZQUFZQyxLQUFLQyxHQUFHO1lBQzFCLE1BQU0sSUFBSSxDQUFDVixjQUFjO1lBQ3pCLE1BQU1pQyxlQUFleEIsS0FBS0MsR0FBRyxLQUFLRjtZQUVsQyxPQUFPO2dCQUNMMEIsUUFBUTtnQkFDUkMsU0FBUztvQkFDUEYsY0FBYyxHQUFHQSxhQUFhLEVBQUUsQ0FBQztvQkFDakNHLFdBQVcsSUFBSSxDQUFDUCxZQUFZO29CQUM1QnJFLFFBQVE7d0JBQ05DLE1BQU0sSUFBSSxDQUFDRCxNQUFNLENBQUNDLElBQUk7d0JBQ3RCSyxVQUFVLElBQUksQ0FBQ04sTUFBTSxDQUFDTSxRQUFRO3dCQUM5QkMsaUJBQWlCLElBQUksQ0FBQ1AsTUFBTSxDQUFDTyxlQUFlO29CQUM5QztnQkFDRjtZQUNGO1FBQ0YsRUFBRSxPQUFPckIsT0FBTztZQUNkLE9BQU87Z0JBQ0x3RixRQUFRO2dCQUNSQyxTQUFTO29CQUNQekYsT0FBTyxNQUFpQjRFLE9BQU87b0JBQy9CYyxXQUFXLElBQUksQ0FBQ1AsWUFBWTtnQkFDOUI7WUFDRjtRQUNGO0lBQ0Y7QUFDRjtBQUVBLHNCQUFzQjtBQUNmLE1BQU1RLFNBQVMvRixhQUFhb0MsV0FBVyxHQUFHO0FBRWpELHFEQUFxRDtBQUM5QyxlQUFlNEQ7SUFDcEIsT0FBTyxNQUFNRCxPQUFPbkMsYUFBYTtBQUNuQztBQUVBLHdDQUF3QztBQUNqQyxlQUFlcUMsYUFDcEIxQixLQUFhLEVBQ2JDLE1BQWM7SUFFZCxPQUFPLE1BQU11QixPQUFPekIsT0FBTyxDQUFDQyxPQUFPQztBQUNyQztBQUVBLHlCQUF5QjtBQUNsQixlQUFlMEIsZ0JBQ3BCaEIsUUFBMEQ7SUFFMUQsT0FBTyxNQUFNYSxPQUFPZCxXQUFXLENBQUNDO0FBQ2xDO0FBRUEsK0RBQStEO0FBQy9ELElBQUksSUFBNkIsRUFBRTtJQUNqQ2EsT0FBT3pELFVBQVUsR0FBRzZELEtBQUssQ0FBQyxDQUFDL0Y7UUFDekJMLDJDQUFNQSxDQUFDSyxLQUFLLENBQUMsdURBQXVEQTtJQUN0RTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvdHV6XFxEZXNrdG9wXFxOb3ZhIHBhc3RhXFxzcmNcXHV0aWxzXFxkYXRhYmFzZS1wb29sLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNpc3RlbWEgZGUgcG9vbCBkZSBjb25leMO1ZXMgb3RpbWl6YWRvIHBhcmEgTXlTUUxcblxuaW1wb3J0IG15c3FsIGZyb20gJ215c3FsMi9wcm9taXNlJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcblxuaW50ZXJmYWNlIFBvb2xDb25maWcge1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ/OiBudW1iZXI7XG4gIHVzZXI6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgZGF0YWJhc2U6IHN0cmluZztcbiAgY29ubmVjdGlvbkxpbWl0PzogbnVtYmVyO1xuICBhY3F1aXJlVGltZW91dD86IG51bWJlcjtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgcmVjb25uZWN0PzogYm9vbGVhbjtcbiAgaWRsZVRpbWVvdXQ/OiBudW1iZXI7XG4gIHF1ZXVlTGltaXQ/OiBudW1iZXI7XG59XG5cbmNsYXNzIERhdGFiYXNlUG9vbCB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBEYXRhYmFzZVBvb2w7XG4gIHByaXZhdGUgcG9vbDogbXlzcWwuUG9vbCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbmZpZzogUG9vbENvbmZpZztcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zb2xlLmVycm9yKCfwn5qo8J+aqPCfmqggW1BPT0wtQ09ORklHXSBJTklDSUFMSVpBTkRPIFBPT0wgREUgQ09ORVjDlUVTIPCfmqjwn5qo8J+aqCcpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBEQl9IT1NUOicsIHByb2Nlc3MuZW52LkRCX0hPU1QpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBEQl9QT1JUOicsIHByb2Nlc3MuZW52LkRCX1BPUlQpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBEQl9VU0VSOicsIHByb2Nlc3MuZW52LkRCX1VTRVIpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBEQl9OQU1FOicsIHByb2Nlc3MuZW52LkRCX05BTUUpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBEQl9QQVNTV09SRCBkZWZpbmlkbzonLCAhIXByb2Nlc3MuZW52LkRCX1BBU1NXT1JEKTtcbiAgICBcbiAgICAvLyBGb3LDp2FyIG8gdXNvIGRhcyB2YXJpw6F2ZWlzIGRlIGFtYmllbnRlIGNvcnJldGFzXG4gICAgY29uc3QgZGJIb3N0ID0gcHJvY2Vzcy5lbnYuREJfSE9TVDtcbiAgICBjb25zdCBkYlBvcnQgPSBwcm9jZXNzLmVudi5EQl9QT1JUO1xuICAgIGNvbnN0IGRiVXNlciA9IHByb2Nlc3MuZW52LkRCX1VTRVI7XG4gICAgY29uc3QgZGJQYXNzd29yZCA9IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEO1xuICAgIGNvbnN0IGRiTmFtZSA9IHByb2Nlc3MuZW52LkRCX05BTUU7XG4gICAgXG4gICAgY29uc29sZS5lcnJvcign8J+UpyBbUE9PTC1DT05GSUddIFZhbG9yZXMgYW50ZXMgZGEgY29uZmlndXJhw6fDo286Jyk7XG4gICAgY29uc29sZS5lcnJvcign8J+UpyBbUE9PTC1DT05GSUddIEhvc3QgZmluYWw6JywgZGJIb3N0KTtcbiAgICBjb25zb2xlLmVycm9yKCfwn5SnIFtQT09MLUNPTkZJR10gUG9ydCBmaW5hbDonLCBkYlBvcnQpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBVc2VyIGZpbmFsOicsIGRiVXNlcik7XG4gICAgXG4gICAgaWYgKCFkYkhvc3QgfHwgIWRiUG9ydCB8fCAhZGJVc2VyIHx8ICFkYlBhc3N3b3JkIHx8ICFkYk5hbWUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUE9PTC1DT05GSUddIEVSUk86IFZhcmnDoXZlaXMgZGUgYW1iaWVudGUgb2JyaWdhdMOzcmlhcyBuw6NvIGRlZmluaWRhcyEnKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUE9PTC1DT05GSUddIERCX0hPU1Q6JywgZGJIb3N0KTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUE9PTC1DT05GSUddIERCX1BPUlQ6JywgZGJQb3J0KTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUE9PTC1DT05GSUddIERCX1VTRVI6JywgZGJVc2VyKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUE9PTC1DT05GSUddIERCX1BBU1NXT1JEIGRlZmluaWRvOicsICEhZGJQYXNzd29yZCk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BPT0wtQ09ORklHXSBEQl9OQU1FOicsIGRiTmFtZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhcmnDoXZlaXMgZGUgYW1iaWVudGUgZG8gYmFuY28gZGUgZGFkb3MgbsOjbyBlc3TDo28gZGVmaW5pZGFzIGNvcnJldGFtZW50ZScpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGhvc3Q6IGRiSG9zdCxcbiAgICAgIHBvcnQ6IHBhcnNlSW50KGRiUG9ydCksXG4gICAgICB1c2VyOiBkYlVzZXIsXG4gICAgICBwYXNzd29yZDogZGJQYXNzd29yZCxcbiAgICAgIGRhdGFiYXNlOiBkYk5hbWUsXG4gICAgICBjb25uZWN0aW9uTGltaXQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX0NPTk5FQ1RJT05fTElNSVQgfHwgJzEwJyksXG4gICAgICBhY3F1aXJlVGltZW91dDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfQUNRVUlSRV9USU1FT1VUIHx8ICc2MDAwMCcpLFxuICAgICAgdGltZW91dDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfVElNRU9VVCB8fCAnNjAwMDAnKSxcbiAgICAgIHJlY29ubmVjdDogdHJ1ZSxcbiAgICAgIGlkbGVUaW1lb3V0OiBwYXJzZUludChwcm9jZXNzLmVudi5EQl9JRExFX1RJTUVPVVQgfHwgJzMwMDAwMCcpLCAvLyA1IG1pbnV0b3NcbiAgICAgIHF1ZXVlTGltaXQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1FVRVVFX0xJTUlUIHx8ICcwJykgLy8gMCA9IHNlbSBsaW1pdGVcbiAgICB9O1xuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoJ/CflKcgW1BPT0wtQ09ORklHXSBDb25maWd1cmHDp8OjbyBmaW5hbCBkbyBwb29sOicsIHtcbiAgICAgIGhvc3Q6IHRoaXMuY29uZmlnLmhvc3QsXG4gICAgICBwb3J0OiB0aGlzLmNvbmZpZy5wb3J0LFxuICAgICAgdXNlcjogdGhpcy5jb25maWcudXNlcixcbiAgICAgIGRhdGFiYXNlOiB0aGlzLmNvbmZpZy5kYXRhYmFzZVxuICAgIH0pO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/Cfmqjwn5qo8J+aqCBbUE9PTC1DT05GSUddIEZJTSBEQSBDT05GSUdVUkHDh8ODTyDwn5qo8J+aqPCfmqgnKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRGF0YWJhc2VQb29sIHtcbiAgICBpZiAoIURhdGFiYXNlUG9vbC5pbnN0YW5jZSkge1xuICAgICAgRGF0YWJhc2VQb29sLmluc3RhbmNlID0gbmV3IERhdGFiYXNlUG9vbCgpO1xuICAgIH1cbiAgICByZXR1cm4gRGF0YWJhc2VQb29sLmluc3RhbmNlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCAmJiB0aGlzLnBvb2wpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5wb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XG4gICAgICAgIGhvc3Q6IHRoaXMuY29uZmlnLmhvc3QsXG4gICAgICAgIHBvcnQ6IHRoaXMuY29uZmlnLnBvcnQsXG4gICAgICAgIHVzZXI6IHRoaXMuY29uZmlnLnVzZXIsXG4gICAgICAgIHBhc3N3b3JkOiB0aGlzLmNvbmZpZy5wYXNzd29yZCxcbiAgICAgICAgZGF0YWJhc2U6IHRoaXMuY29uZmlnLmRhdGFiYXNlLFxuICAgICAgICBjb25uZWN0aW9uTGltaXQ6IHRoaXMuY29uZmlnLmNvbm5lY3Rpb25MaW1pdCxcbiAgICAgICAgcXVldWVMaW1pdDogdGhpcy5jb25maWcucXVldWVMaW1pdCxcbiAgICAgICAgLy8gQ29uZmlndXJhw6fDtWVzIGFkaWNpb25haXMgcGFyYSBvdGltaXphw6fDo29cbiAgICAgICAgY2hhcnNldDogJ3V0ZjhtYjQnLFxuICAgICAgICB0aW1lem9uZTogJ2xvY2FsJyxcbiAgICAgICAgc3VwcG9ydEJpZ051bWJlcnM6IHRydWUsXG4gICAgICAgIGJpZ051bWJlclN0cmluZ3M6IHRydWUsXG4gICAgICAgIGRhdGVTdHJpbmdzOiBmYWxzZSxcbiAgICAgICAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSwgLy8gU2VndXJhbsOnYVxuICAgICAgICAvLyBQb29sIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIHR5cGVDYXN0OiBmdW5jdGlvbiAoZmllbGQ6IHVua25vd24sIG5leHQ6ICgpID0+IHVua25vd24pIHtcbiAgICAgICAgICBjb25zdCBmaWVsZE9iaiA9IGZpZWxkIGFzIHsgdHlwZTogc3RyaW5nOyBsZW5ndGg6IG51bWJlcjsgc3RyaW5nOiAoKSA9PiBzdHJpbmcgfTtcbiAgICAgICAgICBpZiAoZmllbGRPYmoudHlwZSA9PT0gJ1RJTlknICYmIGZpZWxkT2JqLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIChmaWVsZE9iai5zdHJpbmcoKSA9PT0gJzEnKTsgLy8gQ29udmVydCBUSU5ZSU5UKDEpIHRvIGJvb2xlYW5cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5leHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEV2ZW50IGxpc3RlbmVycyBwYXJhIG1vbml0b3JhbWVudG9cbiAgICAgIHRoaXMucG9vbC5vbignY29ubmVjdGlvbicsIChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnTm92YSBjb25leMOjbyBlc3RhYmVsZWNpZGEnLCB7IGNvbm5lY3Rpb25JZDogY29ubmVjdGlvbi50aHJlYWRJZCB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmVyIGV2ZW50IGxpc3RlbmVyICdlcnJvcicgcG9pcyBuw6NvIMOpIHN1cG9ydGFkbyBwZWxvIHRpcG8gUG9vbFxuXG4gICAgICB0aGlzLnBvb2wub24oJ3JlbGVhc2UnLCAoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbmV4w6NvIGxpYmVyYWRhJywgeyBjb25uZWN0aW9uSWQ6IGNvbm5lY3Rpb24udGhyZWFkSWQgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVGVzdGFyIGNvbmV4w6NvIGluaWNpYWxcbiAgICAgIGF3YWl0IHRoaXMudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIGxvZ2dlci5pbmZvKCdQb29sIGRlIGNvbmV4w7VlcyBpbmljaWFsaXphZG8gY29tIHN1Y2Vzc28nLCB7XG4gICAgICAgIGhvc3Q6IHRoaXMuY29uZmlnLmhvc3QsXG4gICAgICAgIGRhdGFiYXNlOiB0aGlzLmNvbmZpZy5kYXRhYmFzZSxcbiAgICAgICAgY29ubmVjdGlvbkxpbWl0OiB0aGlzLmNvbmZpZy5jb25uZWN0aW9uTGltaXRcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJybyBhbyBpbmljaWFsaXphciBwb29sIGRlIGNvbmV4w7VlcycsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnBvb2wpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUG9vbCBuw6NvIGluaWNpYWxpemFkbycpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB0aGlzLnBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLnBpbmcoKTtcbiAgICAgIGxvZ2dlci5pbmZvKCdUZXN0ZSBkZSBjb25leMOjbyBiZW0tc3VjZWRpZG8nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVEaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGxvZ2dlci53YXJuKCdDb25leMOjbyBwZXJkaWRhLCB0ZW50YW5kbyByZWNvbmVjdGFyLi4uJyk7XG4gICAgXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgbG9nZ2VyLmluZm8oJ1JlY29uZXjDo28gYmVtLXN1Y2VkaWRhJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhbGhhIG5hIHJlY29uZXjDo28nLCBlcnJvcik7XG4gICAgICAgIHRoaXMuaGFuZGxlRGlzY29ubmVjdCgpOyAvLyBUZW50YXIgbm92YW1lbnRlXG4gICAgICB9XG4gICAgfSwgMjAwMCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPG15c3FsLlBvb2xDb25uZWN0aW9uPiB7XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQgfHwgIXRoaXMucG9vbCkge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBvb2wpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUG9vbCBkZSBjb25leMO1ZXMgbsOjbyBkaXNwb27DrXZlbCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB0aGlzLnBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBsb2dnZXIuZGVidWcoJ0NvbmV4w6NvIG9idGlkYSBkbyBwb29sJywgeyBcbiAgICAgICAgZHVyYXRpb246IGAke2R1cmF0aW9ufW1zYCxcbiAgICAgICAgY29ubmVjdGlvbklkOiBjb25uZWN0aW9uLnRocmVhZElkIFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm8gYW8gb2J0ZXIgY29uZXjDo28gZG8gcG9vbCcsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBleGVjdXRlPFQgPSBhbnk+KFxuICAgIHF1ZXJ5OiBzdHJpbmcsIFxuICAgIHBhcmFtcz86IGFueVtdLCBcbiAgICBvcHRpb25zPzogeyB0aW1lb3V0PzogbnVtYmVyIH1cbiAgKTogUHJvbWlzZTxbVCwgbXlzcWwuRmllbGRQYWNrZXRbXV0+IHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ29uZmlndXJhciB0aW1lb3V0IHNlIGVzcGVjaWZpY2Fkb1xuICAgICAgaWYgKG9wdGlvbnM/LnRpbWVvdXQpIHtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeSgnU0VUIFNFU1NJT04gd2FpdF90aW1lb3V0ID0gPycsIFtNYXRoLmNlaWwob3B0aW9ucy50aW1lb3V0IC8gMTAwMCldKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKHF1ZXJ5LCBwYXJhbXMpIGFzIFtULCBteXNxbC5GaWVsZFBhY2tldFtdXTtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0RhdGFiYXNlIG9wZXJhdGlvbiBjb21wbGV0ZWQnLCB7IG9wZXJhdGlvbjogJ2V4ZWN1dGUnLCB0YWJsZTogdGhpcy5leHRyYWN0VGFibGVOYW1lKHF1ZXJ5KSwgZHVyYXRpb24gfSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIGxvZ2dlci5lcnJvcignRGF0YWJhc2Ugb3BlcmF0aW9uIGZhaWxlZCcsIHsgb3BlcmF0aW9uOiAnZXhlY3V0ZScsIHRhYmxlOiB0aGlzLmV4dHJhY3RUYWJsZU5hbWUocXVlcnkpLCBkdXJhdGlvbiwgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcXVlcnk8VCA9IGFueT4oXG4gICAgcXVlcnk6IHN0cmluZywgXG4gICAgcGFyYW1zPzogYW55W11cbiAgKTogUHJvbWlzZTxbVCwgbXlzcWwuRmllbGRQYWNrZXRbXV0+IHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShxdWVyeSwgcGFyYW1zKSBhcyBbVCwgbXlzcWwuRmllbGRQYWNrZXRbXV07XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKCdEYXRhYmFzZSBxdWVyeSBjb21wbGV0ZWQnLCB7IG9wZXJhdGlvbjogJ3F1ZXJ5JywgdGFibGU6IHRoaXMuZXh0cmFjdFRhYmxlTmFtZShxdWVyeSksIGR1cmF0aW9uIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGZhaWxlZCcsIHsgb3BlcmF0aW9uOiAncXVlcnknLCB0YWJsZTogdGhpcy5leHRyYWN0VGFibGVOYW1lKHF1ZXJ5KSwgZHVyYXRpb24sIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVHJhbnNhw6fDo28gY29tIHJvbGxiYWNrIGF1dG9tw6F0aWNvIGVtIGNhc28gZGUgZXJyb1xuICBwdWJsaWMgYXN5bmMgdHJhbnNhY3Rpb248VD4oXG4gICAgY2FsbGJhY2s6IChjb25uZWN0aW9uOiBteXNxbC5Qb29sQ29ubmVjdGlvbikgPT4gUHJvbWlzZTxUPlxuICApOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5iZWdpblRyYW5zYWN0aW9uKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrKGNvbm5lY3Rpb24pO1xuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbW1pdCgpO1xuICAgICAgXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBsb2dnZXIuaW5mbygnRGF0YWJhc2UgdHJhbnNhY3Rpb24gY29tcGxldGVkJywgeyBvcGVyYXRpb246ICd0cmFuc2FjdGlvbicsIHRhYmxlOiAnbXVsdGlwbGUnLCBkdXJhdGlvbiB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5yb2xsYmFjaygpO1xuICAgICAgXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0RhdGFiYXNlIHRyYW5zYWN0aW9uIGZhaWxlZCcsIHsgb3BlcmF0aW9uOiAndHJhbnNhY3Rpb24nLCB0YWJsZTogJ211bHRpcGxlJywgZHVyYXRpb24sIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSk7XG4gICAgICBcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyBFeHRyYWlyIG5vbWUgZGEgdGFiZWxhIGRhIHF1ZXJ5IHBhcmEgbG9nc1xuICBwcml2YXRlIGV4dHJhY3RUYWJsZU5hbWUocXVlcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbWF0Y2ggPSBxdWVyeS5tYXRjaCgvKD86RlJPTXxJTlRPfFVQREFURXxKT0lOKVxccytgPyhbYS16QS1aX11bYS16QS1aMC05X10qKWA/L2kpO1xuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogJ3Vua25vd24nO1xuICB9XG5cbiAgLy8gT2J0ZXIgZXN0YXTDrXN0aWNhcyBkbyBwb29sXG4gIHB1YmxpYyBnZXRQb29sU3RhdHMoKTogYW55IHtcbiAgICBpZiAoIXRoaXMucG9vbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbm5lY3Rpb25MaW1pdDogdGhpcy5jb25maWcuY29ubmVjdGlvbkxpbWl0LFxuICAgICAgYWNxdWlyZVRpbWVvdXQ6IHRoaXMuY29uZmlnLmFjcXVpcmVUaW1lb3V0LFxuICAgICAgLy8gRXN0YXMgcHJvcHJpZWRhZGVzIHBvZGVtIG7Do28gZXN0YXIgZGlzcG9uw612ZWlzIGVtIHRvZGFzIGFzIHZlcnPDtWVzXG4gICAgICAvLyBhY3RpdmVDb25uZWN0aW9uczogdGhpcy5wb29sLl9hbGxDb25uZWN0aW9ucz8ubGVuZ3RoIHx8IDAsXG4gICAgICAvLyBmcmVlQ29ubmVjdGlvbnM6IHRoaXMucG9vbC5fZnJlZUNvbm5lY3Rpb25zPy5sZW5ndGggfHwgMCxcbiAgICAgIC8vIHF1ZXVlZFJlcXVlc3RzOiB0aGlzLnBvb2wuX2Nvbm5lY3Rpb25RdWV1ZT8ubGVuZ3RoIHx8IDBcbiAgICB9O1xuICB9XG5cbiAgLy8gRmVjaGFyIHBvb2wgZ3JhY2lvc2FtZW50ZVxuICBwdWJsaWMgYXN5bmMgY2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMucG9vbCkge1xuICAgICAgbG9nZ2VyLmluZm8oJ0ZlY2hhbmRvIHBvb2wgZGUgY29uZXjDtWVzLi4uJyk7XG4gICAgICBhd2FpdCB0aGlzLnBvb2wuZW5kKCk7XG4gICAgICB0aGlzLnBvb2wgPSBudWxsO1xuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICBsb2dnZXIuaW5mbygnUG9vbCBkZSBjb25leMO1ZXMgZmVjaGFkbycpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlYWx0aCBjaGVja1xuICBwdWJsaWMgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTx7IHN0YXR1czogJ2hlYWx0aHknIHwgJ3VuaGVhbHRoeSc7IGRldGFpbHM6IGFueSB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBhd2FpdCB0aGlzLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHJlc3BvbnNlVGltZTogYCR7cmVzcG9uc2VUaW1lfW1zYCxcbiAgICAgICAgICBwb29sU3RhdHM6IHRoaXMuZ2V0UG9vbFN0YXRzKCksXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICBob3N0OiB0aGlzLmNvbmZpZy5ob3N0LFxuICAgICAgICAgICAgZGF0YWJhc2U6IHRoaXMuY29uZmlnLmRhdGFiYXNlLFxuICAgICAgICAgICAgY29ubmVjdGlvbkxpbWl0OiB0aGlzLmNvbmZpZy5jb25uZWN0aW9uTGltaXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBlcnJvcjogKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlLFxuICAgICAgICAgIHBvb2xTdGF0czogdGhpcy5nZXRQb29sU3RhdHMoKVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyBJbnN0w6JuY2lhIHNpbmdsZXRvblxuZXhwb3J0IGNvbnN0IGRiUG9vbCA9IERhdGFiYXNlUG9vbC5nZXRJbnN0YW5jZSgpO1xuXG4vLyBGdW7Dp8OjbyBkZSBjb252ZW5pw6puY2lhIHBhcmEgbWFudGVyIGNvbXBhdGliaWxpZGFkZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb0RhdGFiYXNlKCk6IFByb21pc2U8bXlzcWwuUG9vbENvbm5lY3Rpb24+IHtcbiAgcmV0dXJuIGF3YWl0IGRiUG9vbC5nZXRDb25uZWN0aW9uKCk7XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgZXhlY3V0YXIgcXVlcmllcyBjb20gcG9vbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeTxUID0gYW55PihcbiAgcXVlcnk6IHN0cmluZywgXG4gIHBhcmFtcz86IGFueVtdXG4pOiBQcm9taXNlPFtULCBteXNxbC5GaWVsZFBhY2tldFtdXT4ge1xuICByZXR1cm4gYXdhaXQgZGJQb29sLmV4ZWN1dGUocXVlcnksIHBhcmFtcyk7XG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgdHJhbnNhw6fDtWVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aFRyYW5zYWN0aW9uPFQ+KFxuICBjYWxsYmFjazogKGNvbm5lY3Rpb246IG15c3FsLlBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIGF3YWl0IGRiUG9vbC50cmFuc2FjdGlvbihjYWxsYmFjayk7XG59XG5cbi8vIEluaWNpYWxpemFyIHBvb2wgbmEgaW1wb3J0YcOnw6NvIChhcGVuYXMgZW0gYW1iaWVudGUgc2Vydmlkb3IpXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgZGJQb29sLmluaXRpYWxpemUoKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhbGhhIGFvIGluaWNpYWxpemFyIHBvb2wgZGUgY29uZXjDtWVzIG5hIGltcG9ydGHDp8OjbycsIGVycm9yKTtcbiAgfSk7XG59Il0sIm5hbWVzIjpbIm15c3FsIiwibG9nZ2VyIiwiRGF0YWJhc2VQb29sIiwicG9vbCIsImlzSW5pdGlhbGl6ZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsIkRCX1BPUlQiLCJEQl9VU0VSIiwiREJfTkFNRSIsIkRCX1BBU1NXT1JEIiwiZGJIb3N0IiwiZGJQb3J0IiwiZGJVc2VyIiwiZGJQYXNzd29yZCIsImRiTmFtZSIsIkVycm9yIiwiY29uZmlnIiwiaG9zdCIsInBvcnQiLCJwYXJzZUludCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIiwiY29ubmVjdGlvbkxpbWl0IiwiREJfQ09OTkVDVElPTl9MSU1JVCIsImFjcXVpcmVUaW1lb3V0IiwiREJfQUNRVUlSRV9USU1FT1VUIiwidGltZW91dCIsIkRCX1RJTUVPVVQiLCJyZWNvbm5lY3QiLCJpZGxlVGltZW91dCIsIkRCX0lETEVfVElNRU9VVCIsInF1ZXVlTGltaXQiLCJEQl9RVUVVRV9MSU1JVCIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJpbml0aWFsaXplIiwiY3JlYXRlUG9vbCIsImNoYXJzZXQiLCJ0aW1lem9uZSIsInN1cHBvcnRCaWdOdW1iZXJzIiwiYmlnTnVtYmVyU3RyaW5ncyIsImRhdGVTdHJpbmdzIiwibXVsdGlwbGVTdGF0ZW1lbnRzIiwidHlwZUNhc3QiLCJmaWVsZCIsIm5leHQiLCJmaWVsZE9iaiIsInR5cGUiLCJsZW5ndGgiLCJzdHJpbmciLCJvbiIsImNvbm5lY3Rpb24iLCJkZWJ1ZyIsImNvbm5lY3Rpb25JZCIsInRocmVhZElkIiwidGVzdENvbm5lY3Rpb24iLCJpbmZvIiwiZ2V0Q29ubmVjdGlvbiIsInBpbmciLCJyZWxlYXNlIiwiaGFuZGxlRGlzY29ubmVjdCIsIndhcm4iLCJzZXRUaW1lb3V0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImR1cmF0aW9uIiwiZXhlY3V0ZSIsInF1ZXJ5IiwicGFyYW1zIiwib3B0aW9ucyIsIk1hdGgiLCJjZWlsIiwicmVzdWx0Iiwib3BlcmF0aW9uIiwidGFibGUiLCJleHRyYWN0VGFibGVOYW1lIiwibWVzc2FnZSIsInRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJiZWdpblRyYW5zYWN0aW9uIiwiY29tbWl0Iiwicm9sbGJhY2siLCJtYXRjaCIsImdldFBvb2xTdGF0cyIsImNsb3NlIiwiZW5kIiwiaGVhbHRoQ2hlY2siLCJyZXNwb25zZVRpbWUiLCJzdGF0dXMiLCJkZXRhaWxzIiwicG9vbFN0YXRzIiwiZGJQb29sIiwiY29ubmVjdFRvRGF0YWJhc2UiLCJleGVjdXRlUXVlcnkiLCJ3aXRoVHJhbnNhY3Rpb24iLCJjYXRjaCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/database-pool.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   createRequestContext: () => (/* binding */ createRequestContext),\n/* harmony export */   logApiRequest: () => (/* binding */ logApiRequest),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   useLogger: () => (/* binding */ useLogger),\n/* harmony export */   withApiLogging: () => (/* binding */ withApiLogging),\n/* harmony export */   withLogging: () => (/* binding */ withLogging)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n// Sistema de logging avanado para produo\n\n\n\nvar LogLevel = /*#__PURE__*/ function(LogLevel) {\n    LogLevel[LogLevel[\"ERROR\"] = 0] = \"ERROR\";\n    LogLevel[LogLevel[\"WARN\"] = 1] = \"WARN\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"DEBUG\"] = 3] = \"DEBUG\";\n    return LogLevel;\n}({});\nclass Logger {\n    constructor(config = {}){\n        this.currentFileSize = 0;\n        this.currentErrorFileSize = 0;\n        this.logs = [];\n        this.maxMemoryLogs = 1000;\n        this.config = {\n            level: this.parseLogLevel(process.env.LOG_LEVEL) || 2,\n            console: true,\n            file: process.env.LOG_FILE ? true : false,\n            filePath: process.env.LOG_FILE || './logs/app.log',\n            errorFilePath: process.env.LOG_ERROR_FILE || './logs/error.log',\n            maxFileSize: this.parseSize(process.env.LOG_MAX_SIZE) || 100 * 1024 * 1024,\n            maxFiles: parseInt(process.env.LOG_MAX_FILES || '10'),\n            format: 'json',\n            ...config\n        };\n        if (this.config.file && this.config.filePath) {\n            this.initFileLogging();\n        }\n    }\n    parseLogLevel(level) {\n        if (!level) return undefined;\n        switch(level.toLowerCase()){\n            case 'error':\n                return 0;\n            case 'warn':\n                return 1;\n            case 'info':\n                return 2;\n            case 'debug':\n                return 3;\n            default:\n                return undefined;\n        }\n    }\n    parseSize(size) {\n        if (!size) return undefined;\n        const match = size.match(/^(\\d+)(\\w+)?$/);\n        if (!match) return undefined;\n        const value = parseInt(match[1]);\n        const unit = (match[2] || '').toLowerCase();\n        switch(unit){\n            case 'kb':\n                return value * 1024;\n            case 'mb':\n                return value * 1024 * 1024;\n            case 'gb':\n                return value * 1024 * 1024 * 1024;\n            default:\n                return value;\n        }\n    }\n    initFileLogging() {\n        if (!this.config.filePath) return;\n        const logDir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(this.config.filePath);\n        const errorLogDir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(this.config.errorFilePath);\n        // Criar diretrios se no existirem\n        [\n            logDir,\n            errorLogDir\n        ].forEach((dir)=>{\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dir)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n                    recursive: true\n                });\n            }\n        });\n        // Inicializar streams\n        this.fileStream = (0,fs__WEBPACK_IMPORTED_MODULE_0__.createWriteStream)(this.config.filePath, {\n            flags: 'a'\n        });\n        this.errorFileStream = (0,fs__WEBPACK_IMPORTED_MODULE_0__.createWriteStream)(this.config.errorFilePath, {\n            flags: 'a'\n        });\n        // Verificar tamanhos atuais\n        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(this.config.filePath)) {\n            this.currentFileSize = fs__WEBPACK_IMPORTED_MODULE_0___default().statSync(this.config.filePath).size;\n        }\n        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(this.config.errorFilePath)) {\n            this.currentErrorFileSize = fs__WEBPACK_IMPORTED_MODULE_0___default().statSync(this.config.errorFilePath).size;\n        }\n    }\n    rotateLogFile(filePath, isError = false) {\n        const stream = isError ? this.errorFileStream : this.fileStream;\n        if (stream) {\n            stream.end();\n        }\n        const ext = path__WEBPACK_IMPORTED_MODULE_1___default().extname(filePath);\n        const base = path__WEBPACK_IMPORTED_MODULE_1___default().basename(filePath, ext);\n        const dir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(filePath);\n        // Rotacionar arquivos\n        for(let i = this.config.maxFiles - 1; i > 0; i--){\n            const oldFile = path__WEBPACK_IMPORTED_MODULE_1___default().join(dir, `${base}.${i}${ext}`);\n            const newFile = path__WEBPACK_IMPORTED_MODULE_1___default().join(dir, `${base}.${i + 1}${ext}`);\n            if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(oldFile)) {\n                if (i === this.config.maxFiles - 1) {\n                    fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(oldFile);\n                } else {\n                    fs__WEBPACK_IMPORTED_MODULE_0___default().renameSync(oldFile, newFile);\n                }\n            }\n        }\n        const rotatedFile = path__WEBPACK_IMPORTED_MODULE_1___default().join(dir, `${base}.1${ext}`);\n        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().renameSync(filePath, rotatedFile);\n        }\n        // Criar novo stream\n        const newStream = (0,fs__WEBPACK_IMPORTED_MODULE_0__.createWriteStream)(filePath, {\n            flags: 'a'\n        });\n        if (isError) {\n            this.errorFileStream = newStream;\n            this.currentErrorFileSize = 0;\n        } else {\n            this.fileStream = newStream;\n            this.currentFileSize = 0;\n        }\n    }\n    shouldLog(level) {\n        return level <= this.config.level;\n    }\n    formatMessage(level, message, data, stack, context) {\n        return {\n            timestamp: new Date().toISOString(),\n            level: LogLevel[level],\n            message,\n            ...data && {\n                data\n            },\n            ...stack && {\n                stack\n            },\n            ...context && context\n        };\n    }\n    addToMemory(entry) {\n        this.logs.push(entry);\n        if (this.logs.length > this.maxMemoryLogs) {\n            this.logs.shift();\n        }\n    }\n    writeToFile(entry) {\n        if (!this.config.file) return;\n        const logLine = this.config.format === 'json' ? JSON.stringify(entry) + '\\n' : `${entry.timestamp} [${entry.level}] ${entry.message}${entry.data ? ' ' + JSON.stringify(entry.data) : ''}\\n`;\n        const isError = entry.level === 'ERROR';\n        const stream = isError ? this.errorFileStream : this.fileStream;\n        const filePath = isError ? this.config.errorFilePath : this.config.filePath;\n        if (stream) {\n            stream.write(logLine);\n            const lineSize = Buffer.byteLength(logLine);\n            if (isError) {\n                this.currentErrorFileSize += lineSize;\n                if (this.currentErrorFileSize >= this.config.maxFileSize) {\n                    this.rotateLogFile(filePath, true);\n                }\n            } else {\n                this.currentFileSize += lineSize;\n                if (this.currentFileSize >= this.config.maxFileSize) {\n                    this.rotateLogFile(filePath, false);\n                }\n            }\n        }\n    }\n    writeToConsole(entry) {\n        if (!this.config.console) return;\n        const colors = {\n            ERROR: '\\x1b[31m',\n            WARN: '\\x1b[33m',\n            INFO: '\\x1b[36m',\n            DEBUG: '\\x1b[37m'\n        };\n        const color = colors[entry.level] || '';\n        const reset = '\\x1b[0m';\n        const message = `${color}${entry.timestamp} [${entry.level}] ${entry.message}${reset}`;\n        switch(entry.level){\n            case 'ERROR':\n                console.error(message, entry.data || '', entry.stack || '');\n                break;\n            case 'WARN':\n                console.warn(message, entry.data || '');\n                break;\n            case 'INFO':\n                console.info(message, entry.data || '');\n                break;\n            case 'DEBUG':\n                console.debug(message, entry.data || '');\n                break;\n        }\n    }\n    log(level, message, data, stack, context) {\n        if (!this.shouldLog(level)) return;\n        const entry = this.formatMessage(level, message, data, stack, context);\n        this.addToMemory(entry);\n        this.writeToConsole(entry);\n        this.writeToFile(entry);\n    }\n    // Mtodos pblicos\n    debug(message, data, context) {\n        this.log(3, message, data, undefined, context);\n    }\n    info(message, data, context) {\n        this.log(2, message, data, undefined, context);\n    }\n    warn(message, data, context) {\n        this.log(1, message, data, undefined, context);\n    }\n    error(message, error, context) {\n        const stack = error instanceof Error ? error.stack : undefined;\n        this.log(0, message, error, stack, context);\n    }\n    // Mtodos especficos para diferentes tipos de operaes\n    apiLog(method, url, statusCode, duration, context) {\n        const level = statusCode >= 400 ? 1 : 2;\n        this.log(level, `API ${method} ${url} - ${statusCode} (${duration}ms)`, {\n            method,\n            url,\n            statusCode,\n            duration,\n            type: 'api_request'\n        }, undefined, context);\n    }\n    // Logs de performance\n    performance(operation, duration, data, context) {\n        const level = duration > 5000 ? 1 : 2;\n        this.log(level, `Performance: ${operation} took ${duration}ms`, {\n            operation,\n            duration,\n            type: 'performance',\n            ...data\n        }, undefined, context);\n    }\n    // Logs de segurana\n    security(event, severity, data, context) {\n        const levelMap = {\n            low: 2,\n            medium: 1,\n            high: 0,\n            critical: 0\n        };\n        this.log(levelMap[severity], `Security Event: ${event}`, {\n            event,\n            severity,\n            type: 'security',\n            ...data\n        }, undefined, context);\n    }\n    // Logs de banco de dados\n    database(operation, table, duration, error, context) {\n        if (error) {\n            this.log(0, `Database Error: ${operation} on ${table}`, {\n                operation,\n                table,\n                duration,\n                type: 'database'\n            }, error.stack, context);\n        } else {\n            const level = duration > 1000 ? 1 : 3;\n            this.log(level, `Database: ${operation} on ${table} (${duration}ms)`, {\n                operation,\n                table,\n                duration,\n                type: 'database'\n            }, undefined, context);\n        }\n    }\n    // Logs de autenticao\n    auth(action, userId, success = true, context) {\n        const level = success ? 2 : 1;\n        const message = `Auth ${action}: ${success ? 'SUCCESS' : 'FAILED'}`;\n        this.log(level, message, {\n            action,\n            userId,\n            success,\n            type: 'authentication'\n        }, undefined, context);\n    }\n    // Logs de sistema\n    system(event, data, context) {\n        this.log(2, `System: ${event}`, {\n            event,\n            type: 'system',\n            ...data\n        }, undefined, context);\n    }\n    // Mtodo para criar timer de operaes\n    startTimer(operation, context) {\n        const start = Date.now();\n        const requestId = Math.random().toString(36).substring(7);\n        this.debug(`Timer started: ${operation}`, {\n            operation,\n            requestId,\n            type: 'timer_start'\n        }, context);\n        return ()=>{\n            const duration = Date.now() - start;\n            this.performance(operation, duration, {\n                requestId\n            }, context);\n            return duration;\n        };\n    }\n    // Mtodos de consulta\n    getLogs(level, limit, type) {\n        let filteredLogs = this.logs;\n        if (level) {\n            filteredLogs = filteredLogs.filter((log)=>log.level === level.toUpperCase());\n        }\n        if (type) {\n            filteredLogs = filteredLogs.filter((log)=>log.data?.type === type);\n        }\n        if (limit) {\n            return filteredLogs.slice(-limit);\n        }\n        return filteredLogs;\n    }\n    getStats() {\n        const stats = {\n            total: this.logs.length,\n            byLevel: {},\n            byType: {},\n            errors: this.logs.filter((log)=>log.level === 'ERROR').length,\n            warnings: this.logs.filter((log)=>log.level === 'WARN').length\n        };\n        this.logs.forEach((log)=>{\n            stats.byLevel[log.level] = (stats.byLevel[log.level] || 0) + 1;\n            if (log.data?.type) {\n                stats.byType[log.data.type] = (stats.byType[log.data.type] || 0) + 1;\n            }\n        });\n        return stats;\n    }\n    clearLogs() {\n        this.logs = [];\n    }\n    // Mtodo para enviar logs para servios de monitoramento externos\n    async sendToMonitoringService(logs) {\n        const logsToSend = logs || this.logs.filter((log)=>log.level === 'ERROR' || log.level === 'WARN');\n        if (process.env.MONITORING_ENDPOINT && logsToSend.length > 0) {\n            try {\n                const response = await fetch(process.env.MONITORING_ENDPOINT, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${process.env.MONITORING_API_KEY}`,\n                        'User-Agent': 'Sistema-Gestao-Logger/1.0'\n                    },\n                    body: JSON.stringify({\n                        service: 'sistema-gestao',\n                        environment: \"development\",\n                        logs: logsToSend\n                    })\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n                }\n                this.debug('Logs sent to monitoring service', {\n                    count: logsToSend.length,\n                    endpoint: process.env.MONITORING_ENDPOINT\n                });\n            } catch (error) {\n                console.error('Failed to send logs to monitoring service:', error);\n            }\n        }\n    }\n    // Mtodo para cleanup de recursos\n    async close() {\n        if (this.fileStream) {\n            this.fileStream.end();\n        }\n        if (this.errorFileStream) {\n            this.errorFileStream.end();\n        }\n    }\n}\n// Instncia singleton do logger\nconst logger = new Logger();\n// Funo helper para criar contexto de requisio\nfunction createRequestContext(request) {\n    return {\n        ip: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || request.headers.get('cf-connecting-ip') || 'unknown',\n        userAgent: request.headers.get('user-agent') || 'unknown',\n        method: request.method,\n        url: request.url,\n        requestId: request.headers.get('x-request-id') || Math.random().toString(36).substring(7)\n    };\n}\n// Funo helper para logs de API\nfunction logApiRequest(request, response, duration, userId) {\n    const context = createRequestContext(request);\n    if (userId) {\n        context.userId = userId;\n    }\n    logger.apiLog(request.method, new URL(request.url).pathname, response.status, duration, context);\n}\n// Middleware para logging automtico\nfunction withLogging(fn, operation) {\n    return (...args)=>{\n        const timer = logger.startTimer(operation);\n        try {\n            const result = fn(...args);\n            if (result instanceof Promise) {\n                return result.then((value)=>{\n                    timer();\n                    return value;\n                }).catch((error)=>{\n                    timer();\n                    logger.error(`Error in ${operation}`, error);\n                    throw error;\n                });\n            }\n            timer();\n            return result;\n        } catch (error) {\n            timer();\n            logger.error(`Error in ${operation}`, error);\n            throw error;\n        }\n    };\n}\n// Middleware para APIs Next.js\nfunction withApiLogging(handler, operationName) {\n    return async (...args)=>{\n        const request = args[0];\n        const endTimer = logger.startTimer(`API: ${operationName}`);\n        try {\n            logger.info(`API Request: ${operationName}`, {\n                method: request.method,\n                url: request.url\n            });\n            const result = await handler(...args);\n            endTimer();\n            logger.info(`API Success: ${operationName}`);\n            return result;\n        } catch (error) {\n            endTimer();\n            logger.error(`API Error: ${operationName}`, error);\n            throw error;\n        }\n    };\n}\n// Hook para componentes React\nfunction useLogger() {\n    return {\n        debug: logger.debug.bind(logger),\n        info: logger.info.bind(logger),\n        warn: logger.warn.bind(logger),\n        error: logger.error.bind(logger),\n        startTimer: logger.startTimer.bind(logger)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN0QjtRQUN2Qm5FLE9BQU9tRSxPQUFPbkUsS0FBSyxDQUFDeUYsSUFBSSxDQUFDdEI7UUFDekJ0QyxZQUFZc0MsT0FBT3RDLFVBQVUsQ0FBQzRELElBQUksQ0FBQ3RCO0lBQ3JDO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG90dXpcXERlc2t0b3BcXE5vdmEgcGFzdGFcXHNyY1xcdXRpbHNcXGxvZ2dlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTaXN0ZW1hIGRlIGxvZ2dpbmcgYXZhbsOnYWRvIHBhcmEgcHJvZHXDp8Ojb1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgY3JlYXRlV3JpdGVTdHJlYW0sIFdyaXRlU3RyZWFtIH0gZnJvbSAnZnMnO1xuXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XG4gIEVSUk9SID0gMCxcbiAgV0FSTiA9IDEsXG4gIElORk8gPSAyLFxuICBERUJVRyA9IDNcbn1cblxuaW50ZXJmYWNlIExvZ0VudHJ5IHtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIGxldmVsOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZGF0YT86IGFueTtcbiAgc3RhY2s/OiBzdHJpbmc7XG4gIHJlcXVlc3RJZD86IHN0cmluZztcbiAgdXNlcklkPzogc3RyaW5nO1xuICBpcD86IHN0cmluZztcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xuICBvcGVyYXRpb24/OiBzdHJpbmc7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgTG9nZ2VyQ29uZmlnIHtcbiAgbGV2ZWw6IExvZ0xldmVsO1xuICBjb25zb2xlOiBib29sZWFuO1xuICBmaWxlOiBib29sZWFuO1xuICBmaWxlUGF0aD86IHN0cmluZztcbiAgZXJyb3JGaWxlUGF0aD86IHN0cmluZztcbiAgbWF4RmlsZVNpemU/OiBudW1iZXI7XG4gIG1heEZpbGVzPzogbnVtYmVyO1xuICBmb3JtYXQ/OiAnanNvbicgfCAndGV4dCc7XG59XG5cbmNsYXNzIExvZ2dlciB7XG4gIHByaXZhdGUgY29uZmlnOiBMb2dnZXJDb25maWc7XG4gIHByaXZhdGUgZmlsZVN0cmVhbT86IFdyaXRlU3RyZWFtO1xuICBwcml2YXRlIGVycm9yRmlsZVN0cmVhbT86IFdyaXRlU3RyZWFtO1xuICBwcml2YXRlIGN1cnJlbnRGaWxlU2l6ZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBjdXJyZW50RXJyb3JGaWxlU2l6ZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBsb2dzOiBMb2dFbnRyeVtdID0gW107XG4gIHByaXZhdGUgbWF4TWVtb3J5TG9ncyA9IDEwMDA7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPExvZ2dlckNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgbGV2ZWw6IHRoaXMucGFyc2VMb2dMZXZlbChwcm9jZXNzLmVudi5MT0dfTEVWRUwpIHx8IExvZ0xldmVsLklORk8sXG4gICAgICBjb25zb2xlOiB0cnVlLFxuICAgICAgZmlsZTogcHJvY2Vzcy5lbnYuTE9HX0ZJTEUgPyB0cnVlIDogZmFsc2UsXG4gICAgICBmaWxlUGF0aDogcHJvY2Vzcy5lbnYuTE9HX0ZJTEUgfHwgJy4vbG9ncy9hcHAubG9nJyxcbiAgICAgIGVycm9yRmlsZVBhdGg6IHByb2Nlc3MuZW52LkxPR19FUlJPUl9GSUxFIHx8ICcuL2xvZ3MvZXJyb3IubG9nJyxcbiAgICAgIG1heEZpbGVTaXplOiB0aGlzLnBhcnNlU2l6ZShwcm9jZXNzLmVudi5MT0dfTUFYX1NJWkUpIHx8IDEwMCAqIDEwMjQgKiAxMDI0LCAvLyAxMDBNQlxuICAgICAgbWF4RmlsZXM6IHBhcnNlSW50KHByb2Nlc3MuZW52LkxPR19NQVhfRklMRVMgfHwgJzEwJyksXG4gICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5jb25maWcuZmlsZSAmJiB0aGlzLmNvbmZpZy5maWxlUGF0aCkge1xuICAgICAgdGhpcy5pbml0RmlsZUxvZ2dpbmcoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHBhcnNlTG9nTGV2ZWwobGV2ZWw/OiBzdHJpbmcpOiBMb2dMZXZlbCB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCFsZXZlbCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICBzd2l0Y2ggKGxldmVsLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2Vycm9yJzogcmV0dXJuIExvZ0xldmVsLkVSUk9SO1xuICAgICAgY2FzZSAnd2Fybic6IHJldHVybiBMb2dMZXZlbC5XQVJOO1xuICAgICAgY2FzZSAnaW5mbyc6IHJldHVybiBMb2dMZXZlbC5JTkZPO1xuICAgICAgY2FzZSAnZGVidWcnOiByZXR1cm4gTG9nTGV2ZWwuREVCVUc7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTaXplKHNpemU/OiBzdHJpbmcpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICghc2l6ZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICBjb25zdCBtYXRjaCA9IHNpemUubWF0Y2goL14oXFxkKykoXFx3Kyk/JC8pO1xuICAgIGlmICghbWF0Y2gpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgXG4gICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgY29uc3QgdW5pdCA9IChtYXRjaFsyXSB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICBzd2l0Y2ggKHVuaXQpIHtcbiAgICAgIGNhc2UgJ2tiJzogcmV0dXJuIHZhbHVlICogMTAyNDtcbiAgICAgIGNhc2UgJ21iJzogcmV0dXJuIHZhbHVlICogMTAyNCAqIDEwMjQ7XG4gICAgICBjYXNlICdnYic6IHJldHVybiB2YWx1ZSAqIDEwMjQgKiAxMDI0ICogMTAyNDtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXRGaWxlTG9nZ2luZygpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmZpbGVQYXRoKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgbG9nRGlyID0gcGF0aC5kaXJuYW1lKHRoaXMuY29uZmlnLmZpbGVQYXRoKTtcbiAgICBjb25zdCBlcnJvckxvZ0RpciA9IHBhdGguZGlybmFtZSh0aGlzLmNvbmZpZy5lcnJvckZpbGVQYXRoISk7XG4gICAgXG4gICAgLy8gQ3JpYXIgZGlyZXTDs3Jpb3Mgc2UgbsOjbyBleGlzdGlyZW1cbiAgICBbbG9nRGlyLCBlcnJvckxvZ0Rpcl0uZm9yRWFjaChkaXIgPT4ge1xuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGRpcikpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSW5pY2lhbGl6YXIgc3RyZWFtc1xuICAgIHRoaXMuZmlsZVN0cmVhbSA9IGNyZWF0ZVdyaXRlU3RyZWFtKHRoaXMuY29uZmlnLmZpbGVQYXRoLCB7IGZsYWdzOiAnYScgfSk7XG4gICAgdGhpcy5lcnJvckZpbGVTdHJlYW0gPSBjcmVhdGVXcml0ZVN0cmVhbSh0aGlzLmNvbmZpZy5lcnJvckZpbGVQYXRoISwgeyBmbGFnczogJ2EnIH0pO1xuICAgIFxuICAgIC8vIFZlcmlmaWNhciB0YW1hbmhvcyBhdHVhaXNcbiAgICBpZiAoZnMuZXhpc3RzU3luYyh0aGlzLmNvbmZpZy5maWxlUGF0aCkpIHtcbiAgICAgIHRoaXMuY3VycmVudEZpbGVTaXplID0gZnMuc3RhdFN5bmModGhpcy5jb25maWcuZmlsZVBhdGgpLnNpemU7XG4gICAgfVxuICAgIGlmIChmcy5leGlzdHNTeW5jKHRoaXMuY29uZmlnLmVycm9yRmlsZVBhdGghKSkge1xuICAgICAgdGhpcy5jdXJyZW50RXJyb3JGaWxlU2l6ZSA9IGZzLnN0YXRTeW5jKHRoaXMuY29uZmlnLmVycm9yRmlsZVBhdGghKS5zaXplO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcm90YXRlTG9nRmlsZShmaWxlUGF0aDogc3RyaW5nLCBpc0Vycm9yID0gZmFsc2UpIHtcbiAgICBjb25zdCBzdHJlYW0gPSBpc0Vycm9yID8gdGhpcy5lcnJvckZpbGVTdHJlYW0gOiB0aGlzLmZpbGVTdHJlYW07XG4gICAgXG4gICAgaWYgKHN0cmVhbSkge1xuICAgICAgc3RyZWFtLmVuZCgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBleHQgPSBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpO1xuICAgIGNvbnN0IGJhc2UgPSBwYXRoLmJhc2VuYW1lKGZpbGVQYXRoLCBleHQpO1xuICAgIGNvbnN0IGRpciA9IHBhdGguZGlybmFtZShmaWxlUGF0aCk7XG4gICAgXG4gICAgLy8gUm90YWNpb25hciBhcnF1aXZvc1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmNvbmZpZy5tYXhGaWxlcyEgLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICBjb25zdCBvbGRGaWxlID0gcGF0aC5qb2luKGRpciwgYCR7YmFzZX0uJHtpfSR7ZXh0fWApO1xuICAgICAgY29uc3QgbmV3RmlsZSA9IHBhdGguam9pbihkaXIsIGAke2Jhc2V9LiR7aSArIDF9JHtleHR9YCk7XG4gICAgICBcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKG9sZEZpbGUpKSB7XG4gICAgICAgIGlmIChpID09PSB0aGlzLmNvbmZpZy5tYXhGaWxlcyEgLSAxKSB7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhvbGRGaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmcy5yZW5hbWVTeW5jKG9sZEZpbGUsIG5ld0ZpbGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJvdGF0ZWRGaWxlID0gcGF0aC5qb2luKGRpciwgYCR7YmFzZX0uMSR7ZXh0fWApO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgZnMucmVuYW1lU3luYyhmaWxlUGF0aCwgcm90YXRlZEZpbGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmlhciBub3ZvIHN0cmVhbVxuICAgIGNvbnN0IG5ld1N0cmVhbSA9IGNyZWF0ZVdyaXRlU3RyZWFtKGZpbGVQYXRoLCB7IGZsYWdzOiAnYScgfSk7XG4gICAgXG4gICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3JGaWxlU3RyZWFtID0gbmV3U3RyZWFtO1xuICAgICAgdGhpcy5jdXJyZW50RXJyb3JGaWxlU2l6ZSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlsZVN0cmVhbSA9IG5ld1N0cmVhbTtcbiAgICAgIHRoaXMuY3VycmVudEZpbGVTaXplID0gMDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3VsZExvZyhsZXZlbDogTG9nTGV2ZWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbGV2ZWwgPD0gdGhpcy5jb25maWcubGV2ZWw7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnksIHN0YWNrPzogc3RyaW5nLCBjb250ZXh0PzogYW55KTogTG9nRW50cnkge1xuICAgIHJldHVybiB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0sXG4gICAgICBtZXNzYWdlLFxuICAgICAgLi4uKGRhdGEgJiYgeyBkYXRhIH0pLFxuICAgICAgLi4uKHN0YWNrICYmIHsgc3RhY2sgfSksXG4gICAgICAuLi4oY29udGV4dCAmJiBjb250ZXh0KVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFkZFRvTWVtb3J5KGVudHJ5OiBMb2dFbnRyeSk6IHZvaWQge1xuICAgIHRoaXMubG9ncy5wdXNoKGVudHJ5KTtcbiAgICBpZiAodGhpcy5sb2dzLmxlbmd0aCA+IHRoaXMubWF4TWVtb3J5TG9ncykge1xuICAgICAgdGhpcy5sb2dzLnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cml0ZVRvRmlsZShlbnRyeTogTG9nRW50cnkpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmZpbGUpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBsb2dMaW5lID0gdGhpcy5jb25maWcuZm9ybWF0ID09PSAnanNvbicgXG4gICAgICA/IEpTT04uc3RyaW5naWZ5KGVudHJ5KSArICdcXG4nXG4gICAgICA6IGAke2VudHJ5LnRpbWVzdGFtcH0gWyR7ZW50cnkubGV2ZWx9XSAke2VudHJ5Lm1lc3NhZ2V9JHtlbnRyeS5kYXRhID8gJyAnICsgSlNPTi5zdHJpbmdpZnkoZW50cnkuZGF0YSkgOiAnJ31cXG5gO1xuICAgIFxuICAgIGNvbnN0IGlzRXJyb3IgPSBlbnRyeS5sZXZlbCA9PT0gJ0VSUk9SJztcbiAgICBjb25zdCBzdHJlYW0gPSBpc0Vycm9yID8gdGhpcy5lcnJvckZpbGVTdHJlYW0gOiB0aGlzLmZpbGVTdHJlYW07XG4gICAgY29uc3QgZmlsZVBhdGggPSBpc0Vycm9yID8gdGhpcy5jb25maWcuZXJyb3JGaWxlUGF0aCEgOiB0aGlzLmNvbmZpZy5maWxlUGF0aCE7XG4gICAgXG4gICAgaWYgKHN0cmVhbSkge1xuICAgICAgc3RyZWFtLndyaXRlKGxvZ0xpbmUpO1xuICAgICAgXG4gICAgICBjb25zdCBsaW5lU2l6ZSA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGxvZ0xpbmUpO1xuICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50RXJyb3JGaWxlU2l6ZSArPSBsaW5lU2l6ZTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEVycm9yRmlsZVNpemUgPj0gdGhpcy5jb25maWcubWF4RmlsZVNpemUhKSB7XG4gICAgICAgICAgdGhpcy5yb3RhdGVMb2dGaWxlKGZpbGVQYXRoLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jdXJyZW50RmlsZVNpemUgKz0gbGluZVNpemU7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRGaWxlU2l6ZSA+PSB0aGlzLmNvbmZpZy5tYXhGaWxlU2l6ZSEpIHtcbiAgICAgICAgICB0aGlzLnJvdGF0ZUxvZ0ZpbGUoZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgd3JpdGVUb0NvbnNvbGUoZW50cnk6IExvZ0VudHJ5KSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5jb25zb2xlKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgY29sb3JzID0ge1xuICAgICAgRVJST1I6ICdcXHgxYlszMW0nLFxuICAgICAgV0FSTjogJ1xceDFiWzMzbScsXG4gICAgICBJTkZPOiAnXFx4MWJbMzZtJyxcbiAgICAgIERFQlVHOiAnXFx4MWJbMzdtJ1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgY29sb3IgPSBjb2xvcnNbZW50cnkubGV2ZWwgYXMga2V5b2YgdHlwZW9mIGNvbG9yc10gfHwgJyc7XG4gICAgY29uc3QgcmVzZXQgPSAnXFx4MWJbMG0nO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHtjb2xvcn0ke2VudHJ5LnRpbWVzdGFtcH0gWyR7ZW50cnkubGV2ZWx9XSAke2VudHJ5Lm1lc3NhZ2V9JHtyZXNldH1gO1xuICAgIFxuICAgIHN3aXRjaCAoZW50cnkubGV2ZWwpIHtcbiAgICAgIGNhc2UgJ0VSUk9SJzpcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlLCBlbnRyeS5kYXRhIHx8ICcnLCBlbnRyeS5zdGFjayB8fCAnJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnV0FSTic6XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlLCBlbnRyeS5kYXRhIHx8ICcnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdJTkZPJzpcbiAgICAgICAgY29uc29sZS5pbmZvKG1lc3NhZ2UsIGVudHJ5LmRhdGEgfHwgJycpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0RFQlVHJzpcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhtZXNzYWdlLCBlbnRyeS5kYXRhIHx8ICcnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBsb2cobGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnksIHN0YWNrPzogc3RyaW5nLCBjb250ZXh0PzogYW55KSB7XG4gICAgaWYgKCF0aGlzLnNob3VsZExvZyhsZXZlbCkpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuZm9ybWF0TWVzc2FnZShsZXZlbCwgbWVzc2FnZSwgZGF0YSwgc3RhY2ssIGNvbnRleHQpO1xuICAgIFxuICAgIHRoaXMuYWRkVG9NZW1vcnkoZW50cnkpO1xuICAgIHRoaXMud3JpdGVUb0NvbnNvbGUoZW50cnkpO1xuICAgIHRoaXMud3JpdGVUb0ZpbGUoZW50cnkpO1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgcMO6YmxpY29zXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSwgY29udGV4dD86IGFueSk6IHZvaWQge1xuICAgIHRoaXMubG9nKExvZ0xldmVsLkRFQlVHLCBtZXNzYWdlLCBkYXRhLCB1bmRlZmluZWQsIGNvbnRleHQpO1xuICB9XG5cbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5JTkZPLCBtZXNzYWdlLCBkYXRhLCB1bmRlZmluZWQsIGNvbnRleHQpO1xuICB9XG5cbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5XQVJOLCBtZXNzYWdlLCBkYXRhLCB1bmRlZmluZWQsIGNvbnRleHQpO1xuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yIHwgYW55LCBjb250ZXh0PzogYW55KTogdm9pZCB7XG4gICAgY29uc3Qgc3RhY2sgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2coTG9nTGV2ZWwuRVJST1IsIG1lc3NhZ2UsIGVycm9yLCBzdGFjaywgY29udGV4dCk7XG4gIH1cblxuICAvLyBNw6l0b2RvcyBlc3BlY8OtZmljb3MgcGFyYSBkaWZlcmVudGVzIHRpcG9zIGRlIG9wZXJhw6fDtWVzXG4gIGFwaUxvZyhtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlciwgZHVyYXRpb246IG51bWJlciwgY29udGV4dD86IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxldmVsID0gc3RhdHVzQ29kZSA+PSA0MDAgPyBMb2dMZXZlbC5XQVJOIDogTG9nTGV2ZWwuSU5GTztcbiAgICB0aGlzLmxvZyhsZXZlbCwgYEFQSSAke21ldGhvZH0gJHt1cmx9IC0gJHtzdGF0dXNDb2RlfSAoJHtkdXJhdGlvbn1tcylgLCB7XG4gICAgICBtZXRob2QsXG4gICAgICB1cmwsXG4gICAgICBzdGF0dXNDb2RlLFxuICAgICAgZHVyYXRpb24sXG4gICAgICB0eXBlOiAnYXBpX3JlcXVlc3QnXG4gICAgfSwgdW5kZWZpbmVkLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8vIExvZ3MgZGUgcGVyZm9ybWFuY2VcbiAgcGVyZm9ybWFuY2Uob3BlcmF0aW9uOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIsIGRhdGE/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsZXZlbCA9IGR1cmF0aW9uID4gNTAwMCA/IExvZ0xldmVsLldBUk4gOiBMb2dMZXZlbC5JTkZPO1xuICAgIHRoaXMubG9nKGxldmVsLCBgUGVyZm9ybWFuY2U6ICR7b3BlcmF0aW9ufSB0b29rICR7ZHVyYXRpb259bXNgLCB7XG4gICAgICBvcGVyYXRpb24sXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHR5cGU6ICdwZXJmb3JtYW5jZScsXG4gICAgICAuLi5kYXRhXG4gICAgfSwgdW5kZWZpbmVkLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8vIExvZ3MgZGUgc2VndXJhbsOnYVxuICBzZWN1cml0eShldmVudDogc3RyaW5nLCBzZXZlcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCcsIGRhdGE/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsZXZlbE1hcCA9IHtcbiAgICAgIGxvdzogTG9nTGV2ZWwuSU5GTyxcbiAgICAgIG1lZGl1bTogTG9nTGV2ZWwuV0FSTixcbiAgICAgIGhpZ2g6IExvZ0xldmVsLkVSUk9SLFxuICAgICAgY3JpdGljYWw6IExvZ0xldmVsLkVSUk9SXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmxvZyhsZXZlbE1hcFtzZXZlcml0eV0sIGBTZWN1cml0eSBFdmVudDogJHtldmVudH1gLCB7XG4gICAgICBldmVudCxcbiAgICAgIHNldmVyaXR5LFxuICAgICAgdHlwZTogJ3NlY3VyaXR5JyxcbiAgICAgIC4uLmRhdGFcbiAgICB9LCB1bmRlZmluZWQsIGNvbnRleHQpO1xuICB9XG5cbiAgLy8gTG9ncyBkZSBiYW5jbyBkZSBkYWRvc1xuICBkYXRhYmFzZShvcGVyYXRpb246IHN0cmluZywgdGFibGU6IHN0cmluZywgZHVyYXRpb246IG51bWJlciwgZXJyb3I/OiBFcnJvciwgY29udGV4dD86IGFueSk6IHZvaWQge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coTG9nTGV2ZWwuRVJST1IsIGBEYXRhYmFzZSBFcnJvcjogJHtvcGVyYXRpb259IG9uICR7dGFibGV9YCwge1xuICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgIHRhYmxlLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgdHlwZTogJ2RhdGFiYXNlJ1xuICAgICAgfSwgZXJyb3Iuc3RhY2ssIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsZXZlbCA9IGR1cmF0aW9uID4gMTAwMCA/IExvZ0xldmVsLldBUk4gOiBMb2dMZXZlbC5ERUJVRztcbiAgICAgIHRoaXMubG9nKGxldmVsLCBgRGF0YWJhc2U6ICR7b3BlcmF0aW9ufSBvbiAke3RhYmxlfSAoJHtkdXJhdGlvbn1tcylgLCB7XG4gICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgdGFibGUsXG4gICAgICAgIGR1cmF0aW9uLFxuICAgICAgICB0eXBlOiAnZGF0YWJhc2UnXG4gICAgICB9LCB1bmRlZmluZWQsIGNvbnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvZ3MgZGUgYXV0ZW50aWNhw6fDo29cbiAgYXV0aChhY3Rpb246IHN0cmluZywgdXNlcklkPzogc3RyaW5nLCBzdWNjZXNzOiBib29sZWFuID0gdHJ1ZSwgY29udGV4dD86IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxldmVsID0gc3VjY2VzcyA/IExvZ0xldmVsLklORk8gOiBMb2dMZXZlbC5XQVJOO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgQXV0aCAke2FjdGlvbn06ICR7c3VjY2VzcyA/ICdTVUNDRVNTJyA6ICdGQUlMRUQnfWA7XG4gICAgXG4gICAgdGhpcy5sb2cobGV2ZWwsIG1lc3NhZ2UsIHtcbiAgICAgIGFjdGlvbixcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN1Y2Nlc3MsXG4gICAgICB0eXBlOiAnYXV0aGVudGljYXRpb24nXG4gICAgfSwgdW5kZWZpbmVkLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8vIExvZ3MgZGUgc2lzdGVtYVxuICBzeXN0ZW0oZXZlbnQ6IHN0cmluZywgZGF0YT86IGFueSwgY29udGV4dD86IGFueSk6IHZvaWQge1xuICAgIHRoaXMubG9nKExvZ0xldmVsLklORk8sIGBTeXN0ZW06ICR7ZXZlbnR9YCwge1xuICAgICAgZXZlbnQsXG4gICAgICB0eXBlOiAnc3lzdGVtJyxcbiAgICAgIC4uLmRhdGFcbiAgICB9LCB1bmRlZmluZWQsIGNvbnRleHQpO1xuICB9XG5cbiAgLy8gTcOpdG9kbyBwYXJhIGNyaWFyIHRpbWVyIGRlIG9wZXJhw6fDtWVzXG4gIHN0YXJ0VGltZXIob3BlcmF0aW9uOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpOiAoKSA9PiBudW1iZXIge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCByZXF1ZXN0SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG4gICAgXG4gICAgdGhpcy5kZWJ1ZyhgVGltZXIgc3RhcnRlZDogJHtvcGVyYXRpb259YCwge1xuICAgICAgb3BlcmF0aW9uLFxuICAgICAgcmVxdWVzdElkLFxuICAgICAgdHlwZTogJ3RpbWVyX3N0YXJ0J1xuICAgIH0sIGNvbnRleHQpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICAgIHRoaXMucGVyZm9ybWFuY2Uob3BlcmF0aW9uLCBkdXJhdGlvbiwgeyByZXF1ZXN0SWQgfSwgY29udGV4dCk7XG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfTtcbiAgfVxuXG4gIC8vIE3DqXRvZG9zIGRlIGNvbnN1bHRhXG4gIGdldExvZ3MobGV2ZWw/OiBzdHJpbmcsIGxpbWl0PzogbnVtYmVyLCB0eXBlPzogc3RyaW5nKTogTG9nRW50cnlbXSB7XG4gICAgbGV0IGZpbHRlcmVkTG9ncyA9IHRoaXMubG9ncztcbiAgICBcbiAgICBpZiAobGV2ZWwpIHtcbiAgICAgIGZpbHRlcmVkTG9ncyA9IGZpbHRlcmVkTG9ncy5maWx0ZXIobG9nID0+IGxvZy5sZXZlbCA9PT0gbGV2ZWwudG9VcHBlckNhc2UoKSk7XG4gICAgfVxuICAgIFxuICAgIGlmICh0eXBlKSB7XG4gICAgICBmaWx0ZXJlZExvZ3MgPSBmaWx0ZXJlZExvZ3MuZmlsdGVyKGxvZyA9PiBsb2cuZGF0YT8udHlwZSA9PT0gdHlwZSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChsaW1pdCkge1xuICAgICAgcmV0dXJuIGZpbHRlcmVkTG9ncy5zbGljZSgtbGltaXQpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmlsdGVyZWRMb2dzO1xuICB9XG5cbiAgZ2V0U3RhdHMoKTogYW55IHtcbiAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgIHRvdGFsOiB0aGlzLmxvZ3MubGVuZ3RoLFxuICAgICAgYnlMZXZlbDoge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPixcbiAgICAgIGJ5VHlwZToge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPixcbiAgICAgIGVycm9yczogdGhpcy5sb2dzLmZpbHRlcihsb2cgPT4gbG9nLmxldmVsID09PSAnRVJST1InKS5sZW5ndGgsXG4gICAgICB3YXJuaW5nczogdGhpcy5sb2dzLmZpbHRlcihsb2cgPT4gbG9nLmxldmVsID09PSAnV0FSTicpLmxlbmd0aFxuICAgIH07XG4gICAgXG4gICAgdGhpcy5sb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgIHN0YXRzLmJ5TGV2ZWxbbG9nLmxldmVsXSA9IChzdGF0cy5ieUxldmVsW2xvZy5sZXZlbF0gfHwgMCkgKyAxO1xuICAgICAgXG4gICAgICBpZiAobG9nLmRhdGE/LnR5cGUpIHtcbiAgICAgICAgc3RhdHMuYnlUeXBlW2xvZy5kYXRhLnR5cGVdID0gKHN0YXRzLmJ5VHlwZVtsb2cuZGF0YS50eXBlXSB8fCAwKSArIDE7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG5cbiAgY2xlYXJMb2dzKCk6IHZvaWQge1xuICAgIHRoaXMubG9ncyA9IFtdO1xuICB9XG5cbiAgLy8gTcOpdG9kbyBwYXJhIGVudmlhciBsb2dzIHBhcmEgc2VydmnDp29zIGRlIG1vbml0b3JhbWVudG8gZXh0ZXJub3NcbiAgYXN5bmMgc2VuZFRvTW9uaXRvcmluZ1NlcnZpY2UobG9ncz86IExvZ0VudHJ5W10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBsb2dzVG9TZW5kID0gbG9ncyB8fCB0aGlzLmxvZ3MuZmlsdGVyKGxvZyA9PiBsb2cubGV2ZWwgPT09ICdFUlJPUicgfHwgbG9nLmxldmVsID09PSAnV0FSTicpO1xuICAgIFxuICAgIGlmIChwcm9jZXNzLmVudi5NT05JVE9SSU5HX0VORFBPSU5UICYmIGxvZ3NUb1NlbmQubGVuZ3RoID4gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChwcm9jZXNzLmVudi5NT05JVE9SSU5HX0VORFBPSU5ULCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Byb2Nlc3MuZW52Lk1PTklUT1JJTkdfQVBJX0tFWX1gLFxuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnU2lzdGVtYS1HZXN0YW8tTG9nZ2VyLzEuMCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHNlcnZpY2U6ICdzaXN0ZW1hLWdlc3RhbycsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gICAgICAgICAgICBsb2dzOiBsb2dzVG9TZW5kXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmRlYnVnKCdMb2dzIHNlbnQgdG8gbW9uaXRvcmluZyBzZXJ2aWNlJywge1xuICAgICAgICAgIGNvdW50OiBsb2dzVG9TZW5kLmxlbmd0aCxcbiAgICAgICAgICBlbmRwb2ludDogcHJvY2Vzcy5lbnYuTU9OSVRPUklOR19FTkRQT0lOVFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZW5kIGxvZ3MgdG8gbW9uaXRvcmluZyBzZXJ2aWNlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBNw6l0b2RvIHBhcmEgY2xlYW51cCBkZSByZWN1cnNvc1xuICBhc3luYyBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5maWxlU3RyZWFtKSB7XG4gICAgICB0aGlzLmZpbGVTdHJlYW0uZW5kKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVycm9yRmlsZVN0cmVhbSkge1xuICAgICAgdGhpcy5lcnJvckZpbGVTdHJlYW0uZW5kKCk7XG4gICAgfVxuICB9XG59XG5cbi8vIEluc3TDom5jaWEgc2luZ2xldG9uIGRvIGxvZ2dlclxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxuLy8gRXhwb3J0YXIgdGlwb3MgcGFyYSB1c28gZW0gb3V0cm9zIG3Ds2R1bG9zXG5leHBvcnQgdHlwZSB7IExvZ0VudHJ5LCBMb2dnZXJDb25maWcgfTtcblxuLy8gRnVuw6fDo28gaGVscGVyIHBhcmEgY3JpYXIgY29udGV4dG8gZGUgcmVxdWlzacOnw6NvXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVxdWVzdENvbnRleHQocmVxdWVzdDogUmVxdWVzdCk6IGFueSB7XG4gIHJldHVybiB7XG4gICAgaXA6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8IFxuICAgICAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKSB8fCBcbiAgICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldCgnY2YtY29ubmVjdGluZy1pcCcpIHx8IFxuICAgICAgICAndW5rbm93bicsXG4gICAgdXNlckFnZW50OiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd1c2VyLWFnZW50JykgfHwgJ3Vua25vd24nLFxuICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgdXJsOiByZXF1ZXN0LnVybCxcbiAgICByZXF1ZXN0SWQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVxdWVzdC1pZCcpIHx8IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KVxuICB9O1xufVxuXG4vLyBGdW7Dp8OjbyBoZWxwZXIgcGFyYSBsb2dzIGRlIEFQSVxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0FwaVJlcXVlc3QoXG4gIHJlcXVlc3Q6IFJlcXVlc3QsIFxuICByZXNwb25zZTogeyBzdGF0dXM6IG51bWJlciB9LCBcbiAgZHVyYXRpb246IG51bWJlcixcbiAgdXNlcklkPzogc3RyaW5nXG4pIHtcbiAgY29uc3QgY29udGV4dCA9IGNyZWF0ZVJlcXVlc3RDb250ZXh0KHJlcXVlc3QpO1xuICBpZiAodXNlcklkKSB7XG4gICAgY29udGV4dC51c2VySWQgPSB1c2VySWQ7XG4gIH1cbiAgXG4gIGxvZ2dlci5hcGlMb2coXG4gICAgcmVxdWVzdC5tZXRob2QsXG4gICAgbmV3IFVSTChyZXF1ZXN0LnVybCkucGF0aG5hbWUsXG4gICAgcmVzcG9uc2Uuc3RhdHVzLFxuICAgIGR1cmF0aW9uLFxuICAgIGNvbnRleHRcbiAgKTtcbn1cblxuLy8gTWlkZGxld2FyZSBwYXJhIGxvZ2dpbmcgYXV0b23DoXRpY29cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTG9nZ2luZzxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuICBmbjogVCxcbiAgb3BlcmF0aW9uOiBzdHJpbmdcbik6IFQge1xuICByZXR1cm4gKCguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IHRpbWVyID0gbG9nZ2VyLnN0YXJ0VGltZXIob3BlcmF0aW9uKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZm4oLi4uYXJncyk7XG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRpbWVyKCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aW1lcigpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBpbiAke29wZXJhdGlvbn1gLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGltZXIoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRpbWVyKCk7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGluICR7b3BlcmF0aW9ufWAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSkgYXMgVDtcbn1cblxuLy8gTWlkZGxld2FyZSBwYXJhIEFQSXMgTmV4dC5qc1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBcGlMb2dnaW5nPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueT4oaGFuZGxlcjogVCwgb3BlcmF0aW9uTmFtZTogc3RyaW5nKTogVCB7XG4gIHJldHVybiAoYXN5bmMgKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGFyZ3NbMF0gYXMgUmVxdWVzdDtcbiAgICBjb25zdCBlbmRUaW1lciA9IGxvZ2dlci5zdGFydFRpbWVyKGBBUEk6ICR7b3BlcmF0aW9uTmFtZX1gKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oYEFQSSBSZXF1ZXN0OiAke29wZXJhdGlvbk5hbWV9YCwgeyBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLCB1cmw6IHJlcXVlc3QudXJsIH0pO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlciguLi5hcmdzKTtcbiAgICAgIGVuZFRpbWVyKCk7XG4gICAgICBsb2dnZXIuaW5mbyhgQVBJIFN1Y2Nlc3M6ICR7b3BlcmF0aW9uTmFtZX1gKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGVuZFRpbWVyKCk7XG4gICAgICBsb2dnZXIuZXJyb3IoYEFQSSBFcnJvcjogJHtvcGVyYXRpb25OYW1lfWAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSkgYXMgVDtcbn1cblxuLy8gSG9vayBwYXJhIGNvbXBvbmVudGVzIFJlYWN0XG5leHBvcnQgZnVuY3Rpb24gdXNlTG9nZ2VyKCkge1xuICByZXR1cm4ge1xuICAgIGRlYnVnOiBsb2dnZXIuZGVidWcuYmluZChsb2dnZXIpLFxuICAgIGluZm86IGxvZ2dlci5pbmZvLmJpbmQobG9nZ2VyKSxcbiAgICB3YXJuOiBsb2dnZXIud2Fybi5iaW5kKGxvZ2dlciksXG4gICAgZXJyb3I6IGxvZ2dlci5lcnJvci5iaW5kKGxvZ2dlciksXG4gICAgc3RhcnRUaW1lcjogbG9nZ2VyLnN0YXJ0VGltZXIuYmluZChsb2dnZXIpXG4gIH07XG59Il0sIm5hbWVzIjpbImZzIiwicGF0aCIsImNyZWF0ZVdyaXRlU3RyZWFtIiwiTG9nTGV2ZWwiLCJMb2dnZXIiLCJjb25maWciLCJjdXJyZW50RmlsZVNpemUiLCJjdXJyZW50RXJyb3JGaWxlU2l6ZSIsImxvZ3MiLCJtYXhNZW1vcnlMb2dzIiwibGV2ZWwiLCJwYXJzZUxvZ0xldmVsIiwicHJvY2VzcyIsImVudiIsIkxPR19MRVZFTCIsImNvbnNvbGUiLCJmaWxlIiwiTE9HX0ZJTEUiLCJmaWxlUGF0aCIsImVycm9yRmlsZVBhdGgiLCJMT0dfRVJST1JfRklMRSIsIm1heEZpbGVTaXplIiwicGFyc2VTaXplIiwiTE9HX01BWF9TSVpFIiwibWF4RmlsZXMiLCJwYXJzZUludCIsIkxPR19NQVhfRklMRVMiLCJmb3JtYXQiLCJpbml0RmlsZUxvZ2dpbmciLCJ1bmRlZmluZWQiLCJ0b0xvd2VyQ2FzZSIsInNpemUiLCJtYXRjaCIsInZhbHVlIiwidW5pdCIsImxvZ0RpciIsImRpcm5hbWUiLCJlcnJvckxvZ0RpciIsImZvckVhY2giLCJkaXIiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiZmlsZVN0cmVhbSIsImZsYWdzIiwiZXJyb3JGaWxlU3RyZWFtIiwic3RhdFN5bmMiLCJyb3RhdGVMb2dGaWxlIiwiaXNFcnJvciIsInN0cmVhbSIsImVuZCIsImV4dCIsImV4dG5hbWUiLCJiYXNlIiwiYmFzZW5hbWUiLCJpIiwib2xkRmlsZSIsImpvaW4iLCJuZXdGaWxlIiwidW5saW5rU3luYyIsInJlbmFtZVN5bmMiLCJyb3RhdGVkRmlsZSIsIm5ld1N0cmVhbSIsInNob3VsZExvZyIsImZvcm1hdE1lc3NhZ2UiLCJtZXNzYWdlIiwiZGF0YSIsInN0YWNrIiwiY29udGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFkZFRvTWVtb3J5IiwiZW50cnkiLCJwdXNoIiwibGVuZ3RoIiwic2hpZnQiLCJ3cml0ZVRvRmlsZSIsImxvZ0xpbmUiLCJKU09OIiwic3RyaW5naWZ5Iiwid3JpdGUiLCJsaW5lU2l6ZSIsIkJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJ3cml0ZVRvQ29uc29sZSIsImNvbG9ycyIsIkVSUk9SIiwiV0FSTiIsIklORk8iLCJERUJVRyIsImNvbG9yIiwicmVzZXQiLCJlcnJvciIsIndhcm4iLCJpbmZvIiwiZGVidWciLCJsb2ciLCJFcnJvciIsImFwaUxvZyIsIm1ldGhvZCIsInVybCIsInN0YXR1c0NvZGUiLCJkdXJhdGlvbiIsInR5cGUiLCJwZXJmb3JtYW5jZSIsIm9wZXJhdGlvbiIsInNlY3VyaXR5IiwiZXZlbnQiLCJzZXZlcml0eSIsImxldmVsTWFwIiwibG93IiwibWVkaXVtIiwiaGlnaCIsImNyaXRpY2FsIiwiZGF0YWJhc2UiLCJ0YWJsZSIsImF1dGgiLCJhY3Rpb24iLCJ1c2VySWQiLCJzdWNjZXNzIiwic3lzdGVtIiwic3RhcnRUaW1lciIsInN0YXJ0Iiwibm93IiwicmVxdWVzdElkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZ2V0TG9ncyIsImxpbWl0IiwiZmlsdGVyZWRMb2dzIiwiZmlsdGVyIiwidG9VcHBlckNhc2UiLCJzbGljZSIsImdldFN0YXRzIiwic3RhdHMiLCJ0b3RhbCIsImJ5TGV2ZWwiLCJieVR5cGUiLCJlcnJvcnMiLCJ3YXJuaW5ncyIsImNsZWFyTG9ncyIsInNlbmRUb01vbml0b3JpbmdTZXJ2aWNlIiwibG9nc1RvU2VuZCIsIk1PTklUT1JJTkdfRU5EUE9JTlQiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIk1PTklUT1JJTkdfQVBJX0tFWSIsImJvZHkiLCJzZXJ2aWNlIiwiZW52aXJvbm1lbnQiLCJvayIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJjb3VudCIsImVuZHBvaW50IiwiY2xvc2UiLCJsb2dnZXIiLCJjcmVhdGVSZXF1ZXN0Q29udGV4dCIsInJlcXVlc3QiLCJpcCIsImdldCIsInVzZXJBZ2VudCIsImxvZ0FwaVJlcXVlc3QiLCJVUkwiLCJwYXRobmFtZSIsIndpdGhMb2dnaW5nIiwiZm4iLCJhcmdzIiwidGltZXIiLCJyZXN1bHQiLCJQcm9taXNlIiwidGhlbiIsImNhdGNoIiwid2l0aEFwaUxvZ2dpbmciLCJoYW5kbGVyIiwib3BlcmF0aW9uTmFtZSIsImVuZFRpbWVyIiwidXNlTG9nZ2VyIiwiYmluZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/logger.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/long","vendor-chunks/lru-cache","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/named-placeholders","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbackup%2Froute&page=%2Fapi%2Fbackup%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbackup%2Froute.ts&appDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLotuz%5CDesktop%5CNova%20pasta&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();